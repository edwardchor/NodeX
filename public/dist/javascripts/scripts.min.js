function touchFix(e){if(!("clientX"in e||"clientY"in e)){var t=e.touches||e.originalEvent.touches;t&&t.length&&(e.clientX=t[0].clientX,e.clientY=t[0].clientY),e.preventDefault()}}function getPreviousSibling(e){if(e=e[0],e.previousElementSibling)return angular.element(e.previousElementSibling);for(var t=e.previousSibling;null!=t&&1!=t.nodeType;)t=t.previousSibling;return angular.element(t)}function insertElementBefore(e,t){var n=getPreviousSibling(e);n.length>0?n.after(t):e.parent().prepend(t)}function elementMatchesSelector(e,t){if(e instanceof angular.element&&(e=e[0]),null!==matchingFunction)return e[matchingFunction](t)}angular.module("NodeX",["ngRoute","ui.router","ngMaterial","ngAnimate"]).controller("MainController",function(){}),angular.module("NodeX").constant("config",{backendUrlPrefix:"/api"}),angular.module("NodeX").config(["$urlRouterProvider","$stateProvider",function(e,t){t.state("funku",{templateUrl:"views/FunkU.html",controller:"FunkUController"}).state("canvas",{templateUrl:"views/canvas.html",controller:"CanvasController"}).state("ui",{templateUrl:"views/ui.html",controller:"UIController"}).state("animation",{templateUrl:"views/animation.html",controller:"FlashController"}).state("paper",{templateUrl:"views/paper.html",controller:"PaperController"}),e.otherwise("/")}]),angular.module("NodeX").controller("CanvasController",["$scope",function(e){function t(){l.fillStyle="white",l.fillRect(0,0,i,a),s=100+Math.round(50*Math.random()),c=10+Math.round(50*Math.random()),d=Math.round(50+20*Math.random())/100,u=10;var e={x:i/2,y:s+50,angle:90};m=[],m.push(e),l.beginPath(),l.moveTo(e.x,a-50),l.lineTo(e.x,a-e.y),l.strokeStyle="brown",l.lineWidth=u,l.stroke(),n()}function n(){s*=d,u*=d,l.lineWidth=u;var e=[];l.beginPath();for(var r=0;r<m.length;r++){var i=m[r],h=o(i.x,i.y,i.angle+c,s),p=o(i.x,i.y,i.angle-c,s);l.moveTo(i.x,a-i.y),l.lineTo(h.x,a-h.y),l.moveTo(i.x,a-i.y),l.lineTo(p.x,a-p.y),h.angle=i.angle+c,p.angle=i.angle-c,e.push(h),e.push(p)}s<10?l.strokeStyle="green":l.strokeStyle="brown",l.stroke(),m=e,s>2?setTimeout(n,50):setTimeout(t,500)}function o(e,t,n,o){var r=e+o*Math.cos(n*Math.PI/180),l=t+o*Math.sin(n*Math.PI/180);return{x:r,y:l}}var r=document.getElementById("canvas"),l=r.getContext("2d"),i=window.innerWidth,a=window.innerHeight;r.width=i,r.height=a;var s,c,d,u,m=[];t()}]),angular.module("NodeX").controller("FlashController",function(){}),angular.module("NodeX").controller("FunkUController",function(){function e(){drawVisual=requestAnimationFrame(e),n.getFloatTimeDomainData(d),i.fillStyle="rgb(255, 255, 255)",i.fillRect(0,0,a,s),i.lineWidth=1,i.strokeStyle="rgb(0, 0, 0)",i.beginPath();for(var t=2*Math.PI/c,o=0,r=0;r<c;r++){var l=s/3+250*d[r];i.strokeStyle="rgb("+255*.1.toString()+"0, 0, 0)",i.arc(a/2,s/2,l,o,o+t,!1),o+=t}i.stroke()}var t=new(window.AudioContext||window.webkitAudioContext||window.WebkitAudioContext),n=t.createAnalyser(),o=document.querySelector("#music"),r=t.createMediaElementSource(o),l=document.querySelector("#cvs1"),i=l.getContext("2d");r.connect(n),n.connect(t.destination);var a=l.width,s=l.height;n.fftSize=2048;var c=n.fftSize,d=new Float32Array(c);i.clearRect(0,0,a,s),e()}),angular.module("NodeX").controller("MainController",["$scope","$transitions","$state","$location",function(e,t,n,o){n.go("funku")}]),angular.module("NodeX").controller("NavbarController",["$state","$stateParams","$scope",function(e,t,n){n.msg="!",n.currentNavItem="page1"}]),angular.module("NodeX").controller("PaperController",function(){}),angular.module("NodeX").controller("UIController",["$scope",function(e){e.Array1=[1,2,3,4,5],e.Array2=["a","b","c","d","e"]}]).directive("svRoot",[function(){function e(e,t,n){return n?e.x-t.x<0:e.y-t.y<0}function t(e){return r[e]}function n(e){delete r[e]}var o,r=Object.create(null);return{restrict:"A",controller:["$scope","$attrs","$interpolate","$parse",function(l,i,a,s){var c=a(i.svRoot)(l)||l.$id;r[c]||(r[c]=[]);var d,u,m,h,p,v,f=!1,g=s(i.svOnSort);i.svOnStart=i.$$element[0].attributes["sv-on-start"],i.svOnStart=i.svOnStart&&i.svOnStart.value,i.svOnStop=i.$$element[0].attributes["sv-on-stop"],i.svOnStop=i.svOnStop&&i.svOnStop.value;var y=s(i.svOnStart),$=s(i.svOnStop);if(this.sortingInProgress=function(){return o},i.svGrid){if(f="true"===i.svGrid||"false"!==i.svGrid&&null,null===f)throw"Invalid value of sv-grid attribute"}else l.$watchCollection(function(){return t(c)},function(e){f=!1;var t=e.filter(function(e){return!e.container}).map(function(e){return{part:e.getPart().id,y:e.element[0].getBoundingClientRect().top}}),n=Object.create(null);t.forEach(function(e){n[e.part]?n[e.part].push(e.y):n[e.part]=[e.y]}),Object.keys(n).forEach(function(e){n[e].sort(),n[e].forEach(function(t,o){o<n[e].length-1&&t>0&&t===n[e][o+1]&&(f=!0)})})});this.$moveUpdate=function(n,r,i,a,s,g,$){var w=i[0].getBoundingClientRect();"element"===n.tolerance&&(r={x:~~(w.left+w.width/2),y:~~(w.top+w.height/2)}),o=!0,d=[],u||(s?(u=s.clone(),u.removeClass("ng-hide")):(u=a.clone(),u.addClass("sv-visibility-hidden"),u.addClass("sv-placeholder"),u.css({height:w.height+"px",width:w.width+"px"})),a.after(u),a.addClass("ng-hide"),p=a,m=n,h=i,y(l,{$helper:{element:h},$part:g.model(g.scope),$index:$,$item:g.model(g.scope)[$]}),l.$root&&l.$root.$$phase||l.$apply()),h[0].reposition({x:r.x+document.body.scrollLeft-r.offset.x*w.width,y:r.y+document.body.scrollTop-r.offset.y*w.height}),t(c).forEach(function(t,o){if(null==n.containment||elementMatchesSelector(t.element,n.containment)||elementMatchesSelector(t.element,n.containment+" *")){var l=t.element[0].getBoundingClientRect(),i={x:~~(l.left+l.width/2),y:~~(l.top+l.height/2)};t.container||!t.element[0].scrollHeight&&!t.element[0].scrollWidth||d.push({element:t.element,q:(i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y),view:t.getPart(),targetIndex:t.getIndex(),after:e(i,r,f)}),t.container&&!t.element[0].querySelector("[sv-element]:not(.sv-placeholder):not(.sv-source)")&&d.push({element:t.element,q:(i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y),view:t.getPart(),targetIndex:0,container:!0})}});var x=u[0].getBoundingClientRect(),b={x:~~(x.left+x.width/2),y:~~(x.top+x.height/2)};d.push({q:(b.x-r.x)*(b.x-r.x)+(b.y-r.y)*(b.y-r.y),element:u,placeholder:!0}),d.sort(function(e,t){return e.q-t.q}),d.forEach(function(e,t){0!==t||e.placeholder||e.container?0===t&&e.container?(v=e,e.element.append(u)):e.element.removeClass("sv-candidate"):(v=e,e.element.addClass("sv-candidate"),e.after?e.element.after(u):insertElementBefore(e.element,u))})},this.$drop=function(e,t,n){function r(){if(o=!1,u.remove(),h.remove(),p.removeClass("ng-hide"),d=void 0,u=void 0,n=void 0,h=void 0,p=void 0,$(l,{$part:e.model(e.scope),$index:t,$item:e.model(e.scope)[t]}),v){v.element.removeClass("sv-candidate");var r=e.model(e.scope).splice(t,1),i=v.targetIndex;v.view===e&&v.targetIndex>t&&i--,v.after&&i++,v.view.model(v.view.scope).splice(i,0,r[0]),v.view===e&&t===i||g(l,{$partTo:v.view.model(v.view.scope),$partFrom:e.model(e.scope),$item:r[0],$indexTo:i,$indexFrom:t})}v=void 0,l.$root&&l.$root.$$phase||l.$apply()}if(u)if(n.revert){var i=u[0].getBoundingClientRect(),a=h[0].getBoundingClientRect(),s=Math.sqrt(Math.pow(a.top-i.top,2)+Math.pow(a.left-i.left,2)),c=+n.revert*s/200;c=Math.min(c,+n.revert),["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){"undefined"!=typeof h[0].style[e+"transition"]&&(h[0].style[e+"transition"]="all "+c+"ms ease")}),setTimeout(r,c),h.css({top:i.top+document.body.scrollTop+"px",left:i.left+document.body.scrollLeft+"px"})}else r()},this.addToSortableElements=function(e){t(c).push(e)},this.removeFromSortableElements=function(e){var o=t(c),r=o.indexOf(e);r>-1&&(o.splice(r,1),0===o.length&&n(c))}}]}}]).directive("svPart",["$parse",function(e){return{restrict:"A",require:"^svRoot",controller:["$scope",function(e){e.$ctrl=this,this.getPart=function(){return e.part},this.$drop=function(t,n){e.$sortableRoot.$drop(e.part,t,n)}}],scope:!0,link:function(t,n,o,r){if(!o.svPart)throw new Error("no model provided");var l=e(o.svPart);if(!l.assign)throw new Error("model not assignable");t.part={id:t.$id,element:n,model:l,scope:t},t.$sortableRoot=r;var i={element:n,getPart:t.$ctrl.getPart,container:!0};r.addToSortableElements(i),t.$on("$destroy",function(){r.removeFromSortableElements(i)})}}}]).directive("svElement",["$parse",function(e){return{restrict:"A",require:["^svPart","^svRoot"],controller:["$scope",function(e){e.$ctrl=this}],link:function(t,n,o,r){function l(l){function i(e){touchFix(e),d||(n.parent().prepend(h),d=!0),r[1].$moveUpdate(a,{x:e.clientX,y:e.clientY,offset:f},h,n,c,r[0].getPart(),t.$index)}if(touchFix(l),!r[1].sortingInProgress()&&(0==l.button||"mousedown"!==l.type)){d=!1;var a=e(o.svElement)(t);if(a=angular.extend({},{tolerance:"pointer",revert:200,containment:"html"},a),a.containment)var m=closestElement.call(n,a.containment)[0].getBoundingClientRect();var h,p=n,v=n[0].getBoundingClientRect();s||(s=r[0].helper),c||(c=r[0].placeholder),s?(h=s.clone(),h.removeClass("ng-hide"),h.css({left:v.left+document.body.scrollLeft+"px",top:v.top+document.body.scrollTop+"px"}),p.addClass("sv-visibility-hidden")):(h=p.clone(),h.addClass("sv-helper").css({left:v.left+document.body.scrollLeft+"px",top:v.top+document.body.scrollTop+"px",width:v.width+"px"})),h[0].reposition=function(e){var t=e.x,n=e.y,o=h[0].getBoundingClientRect(),r=document.body;m&&(n<m.top+r.scrollTop&&(n=m.top+r.scrollTop),n+o.height>m.top+r.scrollTop+m.height&&(n=m.top+r.scrollTop+m.height-o.height),t<m.left+r.scrollLeft&&(t=m.left+r.scrollLeft),t+o.width>m.left+r.scrollLeft+m.width&&(t=m.left+r.scrollLeft+m.width-o.width)),this.style.left=t-r.scrollLeft+"px",this.style.top=n-r.scrollTop+"px"};var f={x:(l.clientX-v.left)/v.width,y:(l.clientY-v.top)/v.height};u.addClass("sv-sorting-in-progress"),u.on("mousemove touchmove",i).on("mouseup touchend touchcancel",function e(o){u.off("mousemove touchmove",i),u.off("mouseup touchend touchcancel",e),u.removeClass("sv-sorting-in-progress"),d&&r[0].$drop(t.$index,a),n.removeClass("sv-visibility-hidden")})}}var i={element:n,getPart:r[0].getPart,getIndex:function(){return t.$index}};r[1].addToSortableElements(i),t.$on("$destroy",function(){r[1].removeFromSortableElements(i)});var a=n;a.on("mousedown touchstart",l),t.$watch("$ctrl.handle",function(e){e&&(a.off("mousedown touchstart",l),a=e,a.on("mousedown touchstart",l))});var s;t.$watch("$ctrl.helper",function(e){e&&(s=e)});var c;t.$watch("$ctrl.placeholder",function(e){e&&(c=e)});var d,u=(angular.element(document.body),angular.element(document.documentElement))}}}]).directive("svHandle",function(){return{require:"?^svElement",link:function(e,t,n,o){o&&(o.handle=t.add(o.handle))}}}).directive("svHelper",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,o){t.addClass("sv-helper").addClass("ng-hide"),o[1]?o[1].helper=t:o[0]&&(o[0].helper=t)}}}).directive("svPlaceholder",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,o){t.addClass("sv-placeholder").addClass("ng-hide"),o[1]?o[1].placeholder=t:o[0]&&(o[0].placeholder=t)}}});var dde=document.documentElement,matchingFunction=dde.matches?"matches":dde.matchesSelector?"matchesSelector":dde.webkitMatches?"webkitMatches":dde.webkitMatchesSelector?"webkitMatchesSelector":dde.msMatches?"msMatches":dde.msMatchesSelector?"msMatchesSelector":dde.mozMatches?"mozMatches":dde.mozMatchesSelector?"mozMatchesSelector":null;if(null==matchingFunction)throw"This browser doesn't support the HTMLElement.matches method";var closestElement=angular.element.prototype.closest||function(e){for(var t=this[0].parentNode;t!==document.documentElement&&!t[matchingFunction](e);)t=t.parentNode;return t[matchingFunction](e)?angular.element(t):angular.element()};"function"!=typeof angular.element.prototype.add&&(angular.element.prototype.add=function(e){var t,n=angular.element();for(e=angular.element(e),t=0;t<this.length;t++)n.push(this[t]);for(t=0;t<e.length;t++)n.push(e[t]);return n});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL1VJQ29udHJvbGxlci5qcyIsImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL0NhbnZhc0NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9GbGFzaENvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9GdW5rVUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9NYWluQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL05hdmJhckNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9QYXBlckNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsidG91Y2hGaXgiLCJlIiwidG91Y2hlcyIsIm9yaWdpbmFsRXZlbnQiLCJsZW5ndGgiLCJjbGllbnRYIiwiY2xpZW50WSIsInByZXZlbnREZWZhdWx0IiwiZ2V0UHJldmlvdXNTaWJsaW5nIiwiZWxlbWVudCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJhbmd1bGFyIiwic2liIiwicHJldmlvdXNTaWJsaW5nIiwibm9kZVR5cGUiLCJpbnNlcnRFbGVtZW50QmVmb3JlIiwibmV3RWxlbWVudCIsInByZXZTaWJsIiwiYWZ0ZXIiLCJwYXJlbnQiLCJwcmVwZW5kIiwiZWxlbWVudE1hdGNoZXNTZWxlY3RvciIsInNlbGVjdG9yIiwibWF0Y2hpbmdGdW5jdGlvbiIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCJjb25zdGFudCIsImJhY2tlbmRVcmxQcmVmaXgiLCJjb25maWciLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCIkc2NvcGUiLCJpbml0IiwiY3R4IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJXIiwiSCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImRpdmVyZ2VuY2UiLCJyZWR1Y3Rpb24iLCJsaW5lX3dpZHRoIiwidHJ1bmsiLCJ4IiwieSIsImFuZ2xlIiwic3RhcnRfcG9pbnRzIiwicHVzaCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiYnJhbmNoZXMiLCJuZXdfc3RhcnRfcG9pbnRzIiwiaSIsInNwIiwiZXAxIiwiZ2V0X2VuZHBvaW50IiwiZXAyIiwic2V0VGltZW91dCIsImEiLCJlcHgiLCJjb3MiLCJQSSIsImVweSIsInNpbiIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwid2lkdGgiLCJoZWlnaHQiLCJ0aW1lRG9tYWluRHJhdyIsImRyYXdWaXN1YWwiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0aW1lRG9tYWluQW5hbHlzZXIiLCJnZXRGbG9hdFRpbWVEb21haW5EYXRhIiwidGltZURhdGFBcnJheSIsInRpbWVEb21haW5DYW52YXNDdHgiLCJ0aW1lV2lkdGgiLCJ0aW1lSGVpZ2h0Iiwic2xpY2VXaWR0aCIsInRpbWVCdWZmZXJMZW5ndGgiLCJ0aGV0YSIsInIiLCJ0b1N0cmluZyIsImFyYyIsImF1ZGlvQ3R4IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiV2Via2l0QXVkaW9Db250ZXh0IiwiY3JlYXRlQW5hbHlzZXIiLCJteUF1ZGlvIiwicXVlcnlTZWxlY3RvciIsInNvdXJjZSIsImNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZSIsInRpbWVEb21haW5DYW52YXMiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJmZnRTaXplIiwiRmxvYXQzMkFycmF5IiwiY2xlYXJSZWN0IiwiJHRyYW5zaXRpb25zIiwiJHN0YXRlIiwiJGxvY2F0aW9uIiwiZ28iLCIkc3RhdGVQYXJhbXMiLCJtc2ciLCJjdXJyZW50TmF2SXRlbSIsIkFycmF5MSIsIkFycmF5MiIsImRpcmVjdGl2ZSIsInNob3VsZEJlQWZ0ZXIiLCJlbGVtIiwicG9pbnRlciIsImlzR3JpZCIsImdldFNvcnRhYmxlRWxlbWVudHMiLCJrZXkiLCJST09UU19NQVAiLCJyZW1vdmVTb3J0YWJsZUVsZW1lbnRzIiwic29ydGluZ0luUHJvZ3Jlc3MiLCJPYmplY3QiLCJjcmVhdGUiLCJyZXN0cmljdCIsIiRhdHRycyIsIiRpbnRlcnBvbGF0ZSIsIiRwYXJzZSIsIm1hcEtleSIsInN2Um9vdCIsIiRpZCIsImNhbmRpZGF0ZXMiLCIkcGxhY2Vob2xkZXIiLCJvcHRpb25zIiwiJGhlbHBlciIsIiRvcmlnaW5hbCIsIiR0YXJnZXQiLCJvblNvcnQiLCJzdk9uU29ydCIsInN2T25TdGFydCIsIiQkZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJ2YWx1ZSIsInN2T25TdG9wIiwib25TdGFydCIsIm9uU3RvcCIsInRoaXMiLCJzdkdyaWQiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiY29sbGVjdGlvbiIsImFycmF5IiwiZmlsdGVyIiwiaXRlbSIsImNvbnRhaW5lciIsIm1hcCIsInBhcnQiLCJnZXRQYXJ0IiwiaWQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJkaWN0IiwiZm9yRWFjaCIsImtleXMiLCJzb3J0IiwiaW5kZXgiLCIkbW92ZVVwZGF0ZSIsIm9wdHMiLCJtb3VzZSIsInN2RWxlbWVudCIsInN2T3JpZ2luYWwiLCJzdlBsYWNlaG9sZGVyIiwib3JpZ2luYXRpbmdQYXJ0Iiwib3JpZ2luYXRpbmdJbmRleCIsInN2UmVjdCIsInRvbGVyYW5jZSIsImxlZnQiLCJjbG9uZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjc3MiLCIkcGFydCIsIm1vZGVsIiwic2NvcGUiLCIkaW5kZXgiLCIkaXRlbSIsIiRyb290IiwiJCRwaGFzZSIsIiRhcHBseSIsInJlcG9zaXRpb24iLCJib2R5Iiwic2Nyb2xsTGVmdCIsIm9mZnNldCIsInNjcm9sbFRvcCIsInNlIiwiY29udGFpbm1lbnQiLCJyZWN0IiwiY2VudGVyIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiLCJxIiwidmlldyIsInRhcmdldEluZGV4IiwiZ2V0SW5kZXgiLCJwUmVjdCIsInBDZW50ZXIiLCJwbGFjZWhvbGRlciIsImIiLCJjYW5kIiwiYXBwZW5kIiwiJGRyb3AiLCJhZnRlclJldmVydCIsInJlbW92ZSIsInNwbGljZWQiLCJzcGxpY2UiLCIkcGFydFRvIiwiJHBhcnRGcm9tIiwiJGluZGV4VG8iLCIkaW5kZXhGcm9tIiwicmV2ZXJ0IiwicGxhY2Vob2xkZXJSZWN0IiwiaGVscGVyUmVjdCIsImRpc3RhbmNlIiwic3FydCIsInBvdyIsImR1cmF0aW9uIiwibWluIiwicHJlZml4Iiwic3R5bGUiLCJhZGRUb1NvcnRhYmxlRWxlbWVudHMiLCJyZW1vdmVGcm9tU29ydGFibGVFbGVtZW50cyIsImVsZW1zIiwiaW5kZXhPZiIsInJlcXVpcmUiLCIkY3RybCIsIiRzb3J0YWJsZVJvb3QiLCJsaW5rIiwiJGVsZW1lbnQiLCIkc29ydGFibGUiLCJzdlBhcnQiLCJFcnJvciIsImFzc2lnbiIsInNvcnRhYmxlUGFydCIsIiRvbiIsIiRjb250cm9sbGVycyIsIm9uTW91c2Vkb3duIiwib25Nb3VzZW1vdmUiLCJtb3ZlRXhlY3V0ZWQiLCJwb2ludGVyT2Zmc2V0IiwiYnV0dG9uIiwidHlwZSIsImV4dGVuZCIsImNvbnRhaW5tZW50UmVjdCIsImNsb3Nlc3RFbGVtZW50IiwiY2FsbCIsInRhcmdldCIsImNsaWVudFJlY3QiLCJoZWxwZXIiLCJjb29yZHMiLCJ0YXJnZXRMZWZ0IiwidGFyZ2V0VG9wIiwiaHRtbCIsIm9uIiwibW91c2V1cCIsIm9mZiIsInNvcnRhYmxlRWxlbWVudCIsImhhbmRsZSIsIiR3YXRjaCIsImN1c3RvbUhhbmRsZSIsImN1c3RvbUhlbHBlciIsImN1c3RvbVBsYWNlaG9sZGVyIiwiZG9jdW1lbnRFbGVtZW50IiwiYWRkIiwiZGRlIiwibWF0Y2hlcyIsIm1hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXMiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXMiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJwcm90b3R5cGUiLCJjbG9zZXN0IiwiZWwiLCJwYXJlbnROb2RlIiwicmVzIl0sIm1hcHBpbmdzIjoiQUE4ZkEsUUFBQUEsVUFBQUMsR0FDQSxLQUFBLFdBQUFBLElBQUEsV0FBQUEsSUFBQSxDQUNBLEdBQUFDLEdBQUFELEVBQUFDLFNBQUFELEVBQUFFLGNBQUFELE9BQ0FBLElBQUFBLEVBQUFFLFNBQ0FILEVBQUFJLFFBQUFILEVBQUEsR0FBQUcsUUFDQUosRUFBQUssUUFBQUosRUFBQSxHQUFBSSxTQUVBTCxFQUFBTSxrQkFJQSxRQUFBQyxvQkFBQUMsR0FFQSxHQURBQSxFQUFBQSxFQUFBLEdBQ0FBLEVBQUFDLHVCQUNBLE1BQUFDLFNBQUFGLFFBQUFBLEVBQUFDLHVCQUdBLEtBREEsR0FBQUUsR0FBQUgsRUFBQUksZ0JBQ0EsTUFBQUQsR0FBQSxHQUFBQSxFQUFBRSxVQUNBRixFQUFBQSxFQUFBQyxlQUNBLE9BQUFGLFNBQUFGLFFBQUFHLEdBSUEsUUFBQUcscUJBQUFOLEVBQUFPLEdBQ0EsR0FBQUMsR0FBQVQsbUJBQUFDLEVBQ0FRLEdBQUFiLE9BQUEsRUFDQWEsRUFBQUMsTUFBQUYsR0FHQVAsRUFBQVUsU0FBQUMsUUFBQUosR0FnQkEsUUFBQUssd0JBQUFaLEVBQUFhLEdBRUEsR0FEQWIsWUFBQUUsU0FBQUYsVUFBQUEsRUFBQUEsRUFBQSxJQUNBLE9BQUFjLGlCQUNBLE1BQUFkLEdBQUFjLGtCQUFBRCxHQzNpQkFYLFFBQUFhLE9BQUEsU0FBQSxVQUFBLFlBQUEsYUFBQSxjQUFBQyxXQUFBLGlCQUFBLGNDQUFkLFFBQUFhLE9BQUEsU0FBQUUsU0FBQSxVQUNBQyxpQkFBQSxTQ0RBaEIsUUFBQWEsT0FBQSxTQUFBSSxRQUFBLHFCQUFBLGlCQUFBLFNBQUFDLEVBQUFDLEdBQ0FBLEVBQ0FDLE1BQUEsU0FDQUMsWUFBQSxtQkFDQVAsV0FBQSxvQkFFQU0sTUFBQSxVQUNBQyxZQUFBLG9CQUNBUCxXQUFBLHFCQUVBTSxNQUFBLE1BQ0FDLFlBQUEsZ0JBQ0FQLFdBQUEsaUJBRUFNLE1BQUEsYUFDQUMsWUFBQSx1QkFDQVAsV0FBQSxvQkFHQU0sTUFBQSxTQUNBQyxZQUFBLG1CQUNBUCxXQUFBLG9CQUdBSSxFQUFBSSxVQUFBLFFDeEJBdEIsUUFBQWEsT0FBQSxTQUFBQyxXQUFBLG9CQUFBLFNBQUEsU0FBQVMsR0FjQSxRQUFBQyxLQUdBQyxFQUFBQyxVQUFBLFFBQ0FELEVBQUFFLFNBQUEsRUFBQSxFQUFBQyxFQUFBQyxHQUtBcEMsRUFBQSxJQUFBcUMsS0FBQUMsTUFBQSxHQUFBRCxLQUFBRSxVQUVBQyxFQUFBLEdBQUFILEtBQUFDLE1BQUEsR0FBQUQsS0FBQUUsVUFHQUUsRUFBQUosS0FBQUMsTUFBQSxHQUFBLEdBQUFELEtBQUFFLFVBQUEsSUFFQUcsRUFBQSxFQUdBLElBQUFDLElBQUFDLEVBQUFULEVBQUEsRUFBQVUsRUFBQTdDLEVBQUEsR0FBQThDLE1BQUEsR0FFQUMsTUFDQUEsRUFBQUMsS0FBQUwsR0FJQVgsRUFBQWlCLFlBQ0FqQixFQUFBa0IsT0FBQVAsRUFBQUMsRUFBQVIsRUFBQSxJQUNBSixFQUFBbUIsT0FBQVIsRUFBQUMsRUFBQVIsRUFBQU8sRUFBQUUsR0FDQWIsRUFBQW9CLFlBQUEsUUFDQXBCLEVBQUFxQixVQUFBWCxFQUNBVixFQUFBc0IsU0FFQUMsSUFJQSxRQUFBQSxLQUdBdkQsR0FBQXlDLEVBQ0FDLEdBQUFELEVBQ0FULEVBQUFxQixVQUFBWCxDQUVBLElBQUFjLEtBQ0F4QixHQUFBaUIsV0FDQSxLQUFBLEdBQUFRLEdBQUEsRUFBQUEsRUFBQVYsRUFBQS9DLE9BQUF5RCxJQUNBLENBQ0EsR0FBQUMsR0FBQVgsRUFBQVUsR0FHQUUsRUFBQUMsRUFBQUYsRUFBQWQsRUFBQWMsRUFBQWIsRUFBQWEsRUFBQVosTUFBQU4sRUFBQXhDLEdBQ0E2RCxFQUFBRCxFQUFBRixFQUFBZCxFQUFBYyxFQUFBYixFQUFBYSxFQUFBWixNQUFBTixFQUFBeEMsRUFHQWdDLEdBQUFrQixPQUFBUSxFQUFBZCxFQUFBUixFQUFBc0IsRUFBQWIsR0FDQWIsRUFBQW1CLE9BQUFRLEVBQUFmLEVBQUFSLEVBQUF1QixFQUFBZCxHQUNBYixFQUFBa0IsT0FBQVEsRUFBQWQsRUFBQVIsRUFBQXNCLEVBQUFiLEdBQ0FiLEVBQUFtQixPQUFBVSxFQUFBakIsRUFBQVIsRUFBQXlCLEVBQUFoQixHQUdBYyxFQUFBYixNQUFBWSxFQUFBWixNQUFBTixFQUNBcUIsRUFBQWYsTUFBQVksRUFBQVosTUFBQU4sRUFFQWdCLEVBQUFSLEtBQUFXLEdBQ0FILEVBQUFSLEtBQUFhLEdBR0E3RCxFQUFBLEdBQUFnQyxFQUFBb0IsWUFBQSxRQUNBcEIsRUFBQW9CLFlBQUEsUUFDQXBCLEVBQUFzQixTQUNBUCxFQUFBUyxFQUdBeEQsRUFBQSxFQUFBOEQsV0FBQVAsRUFBQSxJQUNBTyxXQUFBL0IsRUFBQSxLQUdBLFFBQUE2QixHQUFBaEIsRUFBQUMsRUFBQWtCLEVBQUEvRCxHQUtBLEdBQUFnRSxHQUFBcEIsRUFBQTVDLEVBQUFxQyxLQUFBNEIsSUFBQUYsRUFBQTFCLEtBQUE2QixHQUFBLEtBQ0FDLEVBQUF0QixFQUFBN0MsRUFBQXFDLEtBQUErQixJQUFBTCxFQUFBMUIsS0FBQTZCLEdBQUEsSUFDQSxRQUFBdEIsRUFBQW9CLEVBQUFuQixFQUFBc0IsR0FsR0EsR0FBQUUsR0FBQUMsU0FBQUMsZUFBQSxVQUNBdkMsRUFBQXFDLEVBQUFHLFdBQUEsTUFFQXJDLEVBQUFzQyxPQUFBQyxXQUNBdEMsRUFBQXFDLE9BQUFFLFdBQ0FOLEdBQUFPLE1BQUF6QyxFQUNBa0MsRUFBQVEsT0FBQXpDLENBR0EsSUFBQXBDLEdBQUF3QyxFQUFBQyxFQUFBQyxFQUFBSyxJQUVBaEIsUUNaQXhCLFFBQUFhLE9BQUEsU0FBQUMsV0FBQSxrQkFBQSxjQ0FBZCxRQUFBYSxPQUFBLFNBQUFDLFdBQUEsa0JBQUEsV0FvQ0EsUUFBQXlELEtBQ0FDLFdBQUFDLHNCQUFBRixHQUNBRyxFQUFBQyx1QkFBQUMsR0FFQUMsRUFBQW5ELFVBQUEscUJBQ0FtRCxFQUFBbEQsU0FBQSxFQUFBLEVBQUFtRCxFQUFBQyxHQUNBRixFQUFBL0IsVUFBQSxFQUNBK0IsRUFBQWhDLFlBQUEsZUFDQWdDLEVBQUFuQyxXQUtBLEtBQUEsR0FIQXNDLEdBQUEsRUFBQWxELEtBQUE2QixHQUFBc0IsRUFDQUMsRUFBQSxFQUVBaEMsRUFBQSxFQUFBQSxFQUFBK0IsRUFBQS9CLElBQUEsQ0FDQSxHQUFBaUMsR0FBQUosRUFBQSxFQUFBLElBQUFILEVBQUExQixFQUNBMkIsR0FBQWhDLFlBQUEsT0FBQSxJQUFBLEdBQUF1QyxXQUFBLFdBQ0FQLEVBQUFRLElBQUFQLEVBQUEsRUFBQUMsRUFBQSxFQUFBSSxFQUFBRCxFQUFBQSxFQUFBRixHQUFBLEdBTUFFLEdBQUFGLEVBRUFILEVBQUE5QixTQTNEQSxHQUFBdUMsR0FBQSxJQUFBcEIsT0FBQXFCLGNBQUFyQixPQUFBc0Isb0JBQUF0QixPQUFBdUIsb0JBQ0FmLEVBQUFZLEVBQUFJLGlCQUVBQyxFQUFBNUIsU0FBQTZCLGNBQUEsVUFDQUMsRUFBQVAsRUFBQVEseUJBQUFILEdBR0FJLEVBQUFoQyxTQUFBNkIsY0FBQSxTQUNBZixFQUFBa0IsRUFBQTlCLFdBQUEsS0FNQTRCLEdBQUFHLFFBQUF0QixHQUNBQSxFQUFBc0IsUUFBQVYsRUFBQVcsWUFLQSxJQUFBbkIsR0FBQWlCLEVBQUExQixNQUNBVSxFQUFBZ0IsRUFBQXpCLE1BRUFJLEdBQUF3QixRQUFBLElBR0EsSUFBQWpCLEdBQUFQLEVBQUF3QixRQUdBdEIsRUFBQSxHQUFBdUIsY0FBQWxCLEVBR0FKLEdBQUF1QixVQUFBLEVBQUEsRUFBQXRCLEVBQUFDLEdBZ0RBUixNQ2pGQXZFLFFBQUFhLE9BQUEsU0FBQUMsV0FBQSxrQkFBQSxTQUFBLGVBQUEsU0FBQSxZQUFBLFNBQUFTLEVBQUE4RSxFQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxHQUFBLFlDREF4RyxRQUFBYSxPQUFBLFNBQUFDLFdBQUEsb0JBQUEsU0FBQSxlQUFBLFNBQUEsU0FBQXdGLEVBQUFHLEVBQUFsRixHQUNBQSxFQUFBbUYsSUFBQSxJQUNBbkYsRUFBQW9GLGVBQUEsV0NGQTNHLFFBQUFhLE9BQUEsU0FBQUMsV0FBQSxrQkFBQSxjVEFBZCxRQUFBYSxPQUFBLFNBQUFDLFdBQUEsZ0JBQUEsU0FBQSxTQUFBUyxHQUNBQSxFQUFBcUYsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0FyRixFQUFBc0YsUUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLFFBRUFDLFVBQUEsVUFBQSxXQUNBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsTUFBQUEsR0FBQUYsRUFBQTNFLEVBQUE0RSxFQUFBNUUsRUFBQSxFQUFBMkUsRUFBQTFFLEVBQUEyRSxFQUFBM0UsRUFBQSxFQUVBLFFBQUE2RSxHQUFBQyxHQUNBLE1BQUFDLEdBQUFELEdBRUEsUUFBQUUsR0FBQUYsU0FDQUMsR0FBQUQsR0FHQSxHQUFBRyxHQUNBRixFQUFBRyxPQUFBQyxPQUFBLEtBR0EsUUFDQUMsU0FBQSxJQUNBNUcsWUFBQSxTQUFBLFNBQUEsZUFBQSxTQUFBLFNBQUFTLEVBQUFvRyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFGLEVBQUFELEVBQUFJLFFBQUF4RyxJQUFBQSxFQUFBeUcsR0FDQVgsR0FBQVMsS0FBQVQsRUFBQVMsTUFFQSxJQUNBRyxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBcEIsR0FBQSxFQUNBcUIsRUFBQVYsRUFBQUYsRUFBQWEsU0FHQWIsR0FBQWMsVUFBQWQsRUFBQWUsVUFBQSxHQUFBQyxXQUFBLGVBQ0FoQixFQUFBYyxVQUFBZCxFQUFBYyxXQUFBZCxFQUFBYyxVQUFBRyxNQUVBakIsRUFBQWtCLFNBQUFsQixFQUFBZSxVQUFBLEdBQUFDLFdBQUEsY0FDQWhCLEVBQUFrQixTQUFBbEIsRUFBQWtCLFVBQUFsQixFQUFBa0IsU0FBQUQsS0FHQSxJQUFBRSxHQUFBakIsRUFBQUYsRUFBQWMsV0FDQU0sRUFBQWxCLEVBQUFGLEVBQUFrQixTQU1BLElBSkFHLEtBQUF6QixrQkFBQSxXQUNBLE1BQUFBLElBR0FJLEVBQUFzQixRQUVBLEdBREEvQixFQUFBLFNBQUFTLEVBQUFzQixRQUFBLFVBQUF0QixFQUFBc0IsUUFBQSxLQUNBLE9BQUEvQixFQUNBLEtBQUEseUNBSUEzRixHQUFBMkgsaUJBQUEsV0FDQSxNQUFBL0IsR0FBQVcsSUFDQSxTQUFBcUIsR0FDQWpDLEdBQUEsQ0FDQSxJQUFBa0MsR0FBQUQsRUFBQUUsT0FBQSxTQUFBQyxHQUNBLE9BQUFBLEVBQUFDLFlBQ0FDLElBQUEsU0FBQUYsR0FDQSxPQUNBRyxLQUFBSCxFQUFBSSxVQUFBQyxHQUNBckgsRUFBQWdILEVBQUF4SixRQUFBLEdBQUE4Six3QkFBQUMsT0FHQUMsRUFBQXRDLE9BQUFDLE9BQUEsS0FDQTJCLEdBQUFXLFFBQUEsU0FBQVQsR0FDQVEsRUFBQVIsRUFBQUcsTUFDQUssRUFBQVIsRUFBQUcsTUFBQWhILEtBQUE2RyxFQUFBaEgsR0FFQXdILEVBQUFSLEVBQUFHLE9BQUFILEVBQUFoSCxLQUVBa0YsT0FBQXdDLEtBQUFGLEdBQUFDLFFBQUEsU0FBQTNDLEdBQ0EwQyxFQUFBMUMsR0FBQTZDLE9BQ0FILEVBQUExQyxHQUFBMkMsUUFBQSxTQUFBVCxFQUFBWSxHQUNBQSxFQUFBSixFQUFBMUMsR0FBQTNILE9BQUEsR0FDQTZKLEVBQUEsR0FBQUEsSUFBQVEsRUFBQTFDLEdBQUE4QyxFQUFBLEtBQ0FoRCxHQUFBLFFBUUE4QixNQUFBbUIsWUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFMLEVBQUEsR0FBQVYsdUJBQ0EsYUFBQVEsRUFBQVEsWUFDQVAsR0FDQWhJLEtBQUFzSSxFQUFBRSxLQUFBRixFQUFBdEcsTUFBQSxHQUNBL0IsS0FBQXFJLEVBQUFkLElBQUFjLEVBQUFyRyxPQUFBLEtBR0FpRCxHQUFBLEVBQ0FVLEtBQ0FDLElBQ0FzQyxHQUNBdEMsRUFBQXNDLEVBQUFNLFFBQ0E1QyxFQUFBNkMsWUFBQSxhQUdBN0MsRUFBQXFDLEVBQUFPLFFBQ0E1QyxFQUFBOEMsU0FBQSx3QkFDQTlDLEVBQUE4QyxTQUFBLGtCQUNBOUMsRUFBQStDLEtBQ0EzRyxPQUFBcUcsRUFBQXJHLE9BQUEsS0FDQUQsTUFBQXNHLEVBQUF0RyxNQUFBLFFBSUFrRyxFQUFBaEssTUFBQTJILEdBQ0FxQyxFQUFBUyxTQUFBLFdBR0EzQyxFQUFBa0MsRUFDQXBDLEVBQUFpQyxFQUNBaEMsRUFBQWtDLEVBRUF4QixFQUFBdkgsR0FDQTZHLFNBQUF0SSxRQUFBc0ksR0FDQThDLE1BQUFULEVBQUFVLE1BQUFWLEVBQUFXLE9BQ0FDLE9BQUFYLEVBQ0FZLE1BQUFiLEVBQUFVLE1BQUFWLEVBQUFXLE9BQUFWLEtBRUFuSixFQUFBZ0ssT0FBQWhLLEVBQUFnSyxNQUFBQyxTQUFBakssRUFBQWtLLFVBSUFyRCxFQUFBLEdBQUFzRCxZQUNBckosRUFBQWdJLEVBQUFoSSxFQUFBMEIsU0FBQTRILEtBQUFDLFdBQUF2QixFQUFBd0IsT0FBQXhKLEVBQUFzSSxFQUFBdEcsTUFDQS9CLEVBQUErSCxFQUFBL0gsRUFBQXlCLFNBQUE0SCxLQUFBRyxVQUFBekIsRUFBQXdCLE9BQUF2SixFQUFBcUksRUFBQXJHLFNBSUE2QyxFQUFBVyxHQUFBaUMsUUFBQSxTQUFBZ0MsRUFBQTdCLEdBQ0EsR0FBQSxNQUFBRSxFQUFBNEIsYUFHQXRMLHVCQUFBcUwsRUFBQWpNLFFBQUFzSyxFQUFBNEIsY0FDQXRMLHVCQUFBcUwsRUFBQWpNLFFBQUFzSyxFQUFBNEIsWUFBQSxNQUpBLENBT0EsR0FBQUMsR0FBQUYsRUFBQWpNLFFBQUEsR0FBQThKLHdCQUNBc0MsR0FDQTdKLEtBQUE0SixFQUFBcEIsS0FBQW9CLEVBQUE1SCxNQUFBLEdBQ0EvQixLQUFBMkosRUFBQXBDLElBQUFvQyxFQUFBM0gsT0FBQSxHQUVBeUgsR0FBQXhDLFlBQ0F3QyxFQUFBak0sUUFBQSxHQUFBcU0sZUFBQUosRUFBQWpNLFFBQUEsR0FBQXNNLGFBQ0FuRSxFQUFBeEYsTUFDQTNDLFFBQUFpTSxFQUFBak0sUUFDQXVNLEdBQUFILEVBQUE3SixFQUFBZ0ksRUFBQWhJLElBQUE2SixFQUFBN0osRUFBQWdJLEVBQUFoSSxJQUFBNkosRUFBQTVKLEVBQUErSCxFQUFBL0gsSUFBQTRKLEVBQUE1SixFQUFBK0gsRUFBQS9ILEdBQ0FnSyxLQUFBUCxFQUFBckMsVUFDQTZDLFlBQUFSLEVBQUFTLFdBQ0FqTSxNQUFBd0csRUFBQW1GLEVBQUE3QixFQUFBbkQsS0FHQTZFLEVBQUF4QyxZQUFBd0MsRUFBQWpNLFFBQUEsR0FBQThGLGNBQUEsc0RBQ0FxQyxFQUFBeEYsTUFDQTNDLFFBQUFpTSxFQUFBak0sUUFDQXVNLEdBQUFILEVBQUE3SixFQUFBZ0ksRUFBQWhJLElBQUE2SixFQUFBN0osRUFBQWdJLEVBQUFoSSxJQUFBNkosRUFBQTVKLEVBQUErSCxFQUFBL0gsSUFBQTRKLEVBQUE1SixFQUFBK0gsRUFBQS9ILEdBQ0FnSyxLQUFBUCxFQUFBckMsVUFDQTZDLFlBQUEsRUFDQWhELFdBQUEsTUFJQSxJQUFBa0QsR0FBQXZFLEVBQUEsR0FBQTBCLHdCQUNBOEMsR0FDQXJLLEtBQUFvSyxFQUFBNUIsS0FBQTRCLEVBQUFwSSxNQUFBLEdBQ0EvQixLQUFBbUssRUFBQTVDLElBQUE0QyxFQUFBbkksT0FBQSxHQUVBMkQsR0FBQXhGLE1BQ0E0SixHQUFBSyxFQUFBckssRUFBQWdJLEVBQUFoSSxJQUFBcUssRUFBQXJLLEVBQUFnSSxFQUFBaEksSUFBQXFLLEVBQUFwSyxFQUFBK0gsRUFBQS9ILElBQUFvSyxFQUFBcEssRUFBQStILEVBQUEvSCxHQUNBeEMsUUFBQW9JLEVBQ0F5RSxhQUFBLElBRUExRSxFQUFBZ0MsS0FBQSxTQUFBekcsRUFBQW9KLEdBQ0EsTUFBQXBKLEdBQUE2SSxFQUFBTyxFQUFBUCxJQUdBcEUsRUFBQThCLFFBQUEsU0FBQThDLEVBQUEzQyxHQUNBLElBQUFBLEdBQUEyQyxFQUFBRixhQUFBRSxFQUFBdEQsVUFRQSxJQUFBVyxHQUFBMkMsRUFBQXRELFdBQ0FqQixFQUFBdUUsRUFDQUEsRUFBQS9NLFFBQUFnTixPQUFBNUUsSUFHQTJFLEVBQUEvTSxRQUFBaUwsWUFBQSxpQkFaQXpDLEVBQUF1RSxFQUNBQSxFQUFBL00sUUFBQWtMLFNBQUEsZ0JBQ0E2QixFQUFBdE0sTUFDQXNNLEVBQUEvTSxRQUFBUyxNQUFBMkgsR0FFQTlILG9CQUFBeU0sRUFBQS9NLFFBQUFvSSxPQVdBYyxLQUFBK0QsTUFBQSxTQUFBdEMsRUFBQVAsRUFBQS9CLEdBMkJBLFFBQUE2RSxLQW1CQSxHQWxCQXpGLEdBQUEsRUFDQVcsRUFBQStFLFNBQ0E3RSxFQUFBNkUsU0FDQTVFLEVBQUEwQyxZQUFBLFdBRUE5QyxFQUFBLE9BQ0FDLEVBQUEsT0FDQUMsRUFBQSxPQUNBQyxFQUFBLE9BQ0FDLEVBQUEsT0FHQVUsRUFBQXhILEdBQ0EySixNQUFBVCxFQUFBVSxNQUFBVixFQUFBVyxPQUNBQyxPQUFBbkIsRUFDQW9CLE1BQUFiLEVBQUFVLE1BQUFWLEVBQUFXLE9BQUFsQixLQUdBNUIsRUFBQSxDQUNBQSxFQUFBeEksUUFBQWlMLFlBQUEsZUFDQSxJQUFBbUMsR0FBQXpDLEVBQUFVLE1BQUFWLEVBQUFXLE9BQUErQixPQUFBakQsRUFBQSxHQUNBcUMsRUFBQWpFLEVBQUFpRSxXQUNBakUsR0FBQWdFLE9BQUE3QixHQUFBbkMsRUFBQWlFLFlBQUFyQyxHQUNBcUMsSUFDQWpFLEVBQUEvSCxPQUNBZ00sSUFDQWpFLEVBQUFnRSxLQUFBbkIsTUFBQTdDLEVBQUFnRSxLQUFBbEIsT0FBQStCLE9BQUFaLEVBQUEsRUFBQVcsRUFBQSxJQUdBNUUsRUFBQWdFLE9BQUE3QixHQUFBUCxJQUFBcUMsR0FDQWhFLEVBQUFoSCxHQUNBNkwsUUFBQTlFLEVBQUFnRSxLQUFBbkIsTUFBQTdDLEVBQUFnRSxLQUFBbEIsT0FDQWlDLFVBQUE1QyxFQUFBVSxNQUFBVixFQUFBVyxPQUNBRSxNQUFBNEIsRUFBQSxHQUNBSSxTQUFBZixFQUNBZ0IsV0FBQXJELElBSUE1QixFQUFBLE9BRUEvRyxFQUFBZ0ssT0FBQWhLLEVBQUFnSyxNQUFBQyxTQUFBakssRUFBQWtLLFNBcEVBLEdBQUF2RCxFQUVBLEdBQUFDLEVBQUFxRixPQUFBLENBQ0EsR0FBQUMsR0FBQXZGLEVBQUEsR0FBQTBCLHdCQUNBOEQsRUFBQXRGLEVBQUEsR0FBQXdCLHdCQUNBK0QsRUFBQTdMLEtBQUE4TCxLQUNBOUwsS0FBQStMLElBQUFILEVBQUE3RCxJQUFBNEQsRUFBQTVELElBQUEsR0FDQS9ILEtBQUErTCxJQUFBSCxFQUFBN0MsS0FBQTRDLEVBQUE1QyxLQUFBLElBR0FpRCxHQUFBM0YsRUFBQXFGLE9BQUFHLEVBQUEsR0FDQUcsR0FBQWhNLEtBQUFpTSxJQUFBRCxHQUFBM0YsRUFBQXFGLFNBRUEsV0FBQSxRQUFBLE9BQUEsTUFBQSxJQUFBekQsUUFBQSxTQUFBaUUsR0FDQSxtQkFBQTVGLEdBQUEsR0FBQTZGLE1BQUFELEVBQUEsZ0JBQ0E1RixFQUFBLEdBQUE2RixNQUFBRCxFQUFBLGNBQUEsT0FBQUYsRUFBQSxhQUVBdkssV0FBQXlKLEVBQUFjLEdBQ0ExRixFQUFBNkMsS0FDQXBCLElBQUE0RCxFQUFBNUQsSUFBQTlGLFNBQUE0SCxLQUFBRyxVQUFBLEtBQ0FqQixLQUFBNEMsRUFBQTVDLEtBQUE5RyxTQUFBNEgsS0FBQUMsV0FBQSxXQUlBb0IsTUFnREFoRSxLQUFBa0Ysc0JBQUEsU0FBQW5DLEdBQ0E1RSxFQUFBVyxHQUFBckYsS0FBQXNKLElBRUEvQyxLQUFBbUYsMkJBQUEsU0FBQXBDLEdBQ0EsR0FBQXFDLEdBQUFqSCxFQUFBVyxHQUNBb0MsRUFBQWtFLEVBQUFDLFFBQUF0QyxFQUNBN0IsSUFBQSxJQUNBa0UsRUFBQWpCLE9BQUFqRCxFQUFBLEdBQ0EsSUFBQWtFLEVBQUEzTyxRQUNBNkgsRUFBQVEsV0FNQWhCLFVBQUEsVUFBQSxTQUFBLFNBQUFlLEdBQ0EsT0FDQUgsU0FBQSxJQUNBNEcsUUFBQSxVQUNBeE4sWUFBQSxTQUFBLFNBQUFTLEdBQ0FBLEVBQUFnTixNQUFBdkYsS0FDQUEsS0FBQVUsUUFBQSxXQUNBLE1BQUFuSSxHQUFBa0ksTUFFQVQsS0FBQStELE1BQUEsU0FBQTdDLEVBQUEvQixHQUNBNUcsRUFBQWlOLGNBQUF6QixNQUFBeEwsRUFBQWtJLEtBQUFTLEVBQUEvQixNQUdBaUQsT0FBQSxFQUNBcUQsS0FBQSxTQUFBbE4sRUFBQW1OLEVBQUEvRyxFQUFBZ0gsR0FDQSxJQUFBaEgsRUFBQWlILE9BQUEsS0FBQSxJQUFBQyxPQUFBLG9CQUNBLElBQUExRCxHQUFBdEQsRUFBQUYsRUFBQWlILE9BQ0EsS0FBQXpELEVBQUEyRCxPQUFBLEtBQUEsSUFBQUQsT0FBQSx1QkFFQXROLEdBQUFrSSxNQUNBRSxHQUFBcEksRUFBQXlHLElBQ0FsSSxRQUFBNE8sRUFDQXZELE1BQUFBLEVBQ0FDLE1BQUE3SixHQUVBQSxFQUFBaU4sY0FBQUcsQ0FFQSxJQUFBSSxJQUNBalAsUUFBQTRPLEVBQ0FoRixRQUFBbkksRUFBQWdOLE1BQUE3RSxRQUNBSCxXQUFBLEVBRUFvRixHQUFBVCxzQkFBQWEsR0FDQXhOLEVBQUF5TixJQUFBLFdBQUEsV0FDQUwsRUFBQVIsMkJBQUFZLFVBS0FqSSxVQUFBLGFBQUEsU0FBQSxTQUFBZSxHQUNBLE9BQ0FILFNBQUEsSUFDQTRHLFNBQUEsVUFBQSxXQUNBeE4sWUFBQSxTQUFBLFNBQUFTLEdBQ0FBLEVBQUFnTixNQUFBdkYsT0FFQXlGLEtBQUEsU0FBQWxOLEVBQUFtTixFQUFBL0csRUFBQXNILEdBMENBLFFBQUFDLEdBQUE1UCxHQThFQSxRQUFBNlAsR0FBQTdQLEdBQ0FELFNBQUFDLEdBQ0E4UCxJQUNBVixFQUFBbE8sU0FBQUMsUUFBQXFLLEdBQ0FzRSxHQUFBLEdBRUFILEVBQUEsR0FBQTlFLFlBQUFDLEdBQ0EvSCxFQUFBL0MsRUFBQUksUUFDQTRDLEVBQUFoRCxFQUFBSyxRQUNBa00sT0FBQXdELEdBQ0F2RSxFQUFBNEQsRUFBQS9CLEVBQUFzQyxFQUFBLEdBQUF2RixVQUFBbkksRUFBQThKLFFBckZBLEdBRkFoTSxTQUFBQyxJQUVBMlAsRUFBQSxHQUFBMUgsc0JBQ0EsR0FBQWpJLEVBQUFnUSxRQUFBLGNBQUFoUSxFQUFBaVEsTUFBQSxDQUVBSCxHQUFBLENBQ0EsSUFBQWhGLEdBQUF2QyxFQUFBRixFQUFBMkMsV0FBQS9JLEVBTUEsSUFMQTZJLEVBQUFwSyxRQUFBd1AsV0FDQTVFLFVBQUEsVUFDQTRDLE9BQUEsSUFDQXhCLFlBQUEsUUFDQTVCLEdBQ0FBLEVBQUE0QixZQUNBLEdBQUF5RCxHQUFBQyxlQUFBQyxLQUFBakIsRUFBQXRFLEVBQUE0QixhQUFBLEdBQUFwQyx1QkFHQSxJQUVBa0IsR0FGQThFLEVBQUFsQixFQUNBbUIsRUFBQW5CLEVBQUEsR0FBQTlFLHVCQUdBa0csS0FBQUEsRUFBQWIsRUFBQSxHQUFBYSxRQUNBbkQsSUFBQUEsRUFBQXNDLEVBQUEsR0FBQXRDLGFBQ0FtRCxHQUNBaEYsRUFBQWdGLEVBQUFoRixRQUNBQSxFQUFBQyxZQUFBLFdBQ0FELEVBQUFHLEtBQ0FKLEtBQUFnRixFQUFBaEYsS0FBQTlHLFNBQUE0SCxLQUFBQyxXQUFBLEtBQ0EvQixJQUFBZ0csRUFBQWhHLElBQUE5RixTQUFBNEgsS0FBQUcsVUFBQSxPQUVBOEQsRUFBQTVFLFNBQUEsMEJBR0FGLEVBQUE4RSxFQUFBOUUsUUFDQUEsRUFBQUUsU0FBQSxhQUFBQyxLQUNBSixLQUFBZ0YsRUFBQWhGLEtBQUE5RyxTQUFBNEgsS0FBQUMsV0FBQSxLQUNBL0IsSUFBQWdHLEVBQUFoRyxJQUFBOUYsU0FBQTRILEtBQUFHLFVBQUEsS0FDQXpILE1BQUF3TCxFQUFBeEwsTUFBQSxRQUlBeUcsRUFBQSxHQUFBWSxXQUFBLFNBQUFxRSxHQUNBLEdBQUFDLEdBQUFELEVBQUExTixFQUNBNE4sRUFBQUYsRUFBQXpOLEVBQ0FvTCxFQUFBNUMsRUFBQSxHQUFBbEIsd0JBRUErQixFQUFBNUgsU0FBQTRILElBRUE4RCxLQUNBUSxFQUFBUixFQUFBNUYsSUFBQThCLEVBQUFHLFlBQ0FtRSxFQUFBUixFQUFBNUYsSUFBQThCLEVBQUFHLFdBQ0FtRSxFQUFBdkMsRUFBQXBKLE9BQUFtTCxFQUFBNUYsSUFBQThCLEVBQUFHLFVBQUEyRCxFQUFBbkwsU0FDQTJMLEVBQUFSLEVBQUE1RixJQUFBOEIsRUFBQUcsVUFBQTJELEVBQUFuTCxPQUFBb0osRUFBQXBKLFFBQ0EwTCxFQUFBUCxFQUFBNUUsS0FBQWMsRUFBQUMsYUFDQW9FLEVBQUFQLEVBQUE1RSxLQUFBYyxFQUFBQyxZQUNBb0UsRUFBQXRDLEVBQUFySixNQUFBb0wsRUFBQTVFLEtBQUFjLEVBQUFDLFdBQUE2RCxFQUFBcEwsUUFDQTJMLEVBQUFQLEVBQUE1RSxLQUFBYyxFQUFBQyxXQUFBNkQsRUFBQXBMLE1BQUFxSixFQUFBckosUUFFQTJFLEtBQUFpRixNQUFBcEQsS0FBQW1GLEVBQUFyRSxFQUFBQyxXQUFBLEtBQ0E1QyxLQUFBaUYsTUFBQXBFLElBQUFvRyxFQUFBdEUsRUFBQUcsVUFBQSxLQUdBLElBQUF1RCxJQUNBaE4sR0FBQS9DLEVBQUFJLFFBQUFtUSxFQUFBaEYsTUFBQWdGLEVBQUF4TCxNQUNBL0IsR0FBQWhELEVBQUFLLFFBQUFrUSxFQUFBaEcsS0FBQWdHLEVBQUF2TCxPQUVBNEwsR0FBQWxGLFNBQUEsMEJBQ0FrRixFQUFBQyxHQUFBLHNCQUFBaEIsR0FBQWdCLEdBQUEsK0JBQUEsUUFBQUMsR0FBQTlRLEdBQ0E0USxFQUFBRyxJQUFBLHNCQUFBbEIsR0FDQWUsRUFBQUcsSUFBQSwrQkFBQUQsR0FDQUYsRUFBQW5GLFlBQUEsMEJBQ0FxRSxHQUNBSCxFQUFBLEdBQUFsQyxNQUFBeEwsRUFBQThKLE9BQUFqQixHQUVBc0UsRUFBQTNELFlBQUEsMkJBbkhBLEdBQUF1RixJQUNBeFEsUUFBQTRPLEVBQ0FoRixRQUFBdUYsRUFBQSxHQUFBdkYsUUFDQThDLFNBQUEsV0FDQSxNQUFBakwsR0FBQThKLFFBR0E0RCxHQUFBLEdBQUFmLHNCQUFBb0MsR0FDQS9PLEVBQUF5TixJQUFBLFdBQUEsV0FDQUMsRUFBQSxHQUFBZCwyQkFBQW1DLElBR0EsSUFBQUMsR0FBQTdCLENBQ0E2QixHQUFBSixHQUFBLHVCQUFBakIsR0FDQTNOLEVBQUFpUCxPQUFBLGVBQUEsU0FBQUMsR0FDQUEsSUFDQUYsRUFBQUYsSUFBQSx1QkFBQW5CLEdBQ0FxQixFQUFBRSxFQUNBRixFQUFBSixHQUFBLHVCQUFBakIsS0FJQSxJQUFBWSxFQUNBdk8sR0FBQWlQLE9BQUEsZUFBQSxTQUFBRSxHQUNBQSxJQUNBWixFQUFBWSxJQUlBLElBQUEvRCxFQUNBcEwsR0FBQWlQLE9BQUEsb0JBQUEsU0FBQUcsR0FDQUEsSUFDQWhFLEVBQUFnRSxJQUlBLElBR0F2QixHQUZBYyxHQURBbFEsUUFBQUYsUUFBQWlFLFNBQUE0SCxNQUNBM0wsUUFBQUYsUUFBQWlFLFNBQUE2TSx1QkFrR0E5SixVQUFBLFdBQUEsV0FDQSxPQUNBd0gsUUFBQSxjQUNBRyxLQUFBLFNBQUFsTixFQUFBbU4sRUFBQS9HLEVBQUE0RyxHQUNBQSxJQUNBQSxFQUFBZ0MsT0FBQTdCLEVBQUFtQyxJQUFBdEMsRUFBQWdDLGFBSUF6SixVQUFBLFdBQUEsV0FDQSxPQUNBd0gsU0FBQSxXQUFBLGVBQ0FHLEtBQUEsU0FBQWxOLEVBQUFtTixFQUFBL0csRUFBQTRHLEdBQ0FHLEVBQUExRCxTQUFBLGFBQUFBLFNBQUEsV0FDQXVELEVBQUEsR0FDQUEsRUFBQSxHQUFBdUIsT0FBQXBCLEVBQ0FILEVBQUEsS0FDQUEsRUFBQSxHQUFBdUIsT0FBQXBCLE9BSUE1SCxVQUFBLGdCQUFBLFdBQ0EsT0FDQXdILFNBQUEsV0FBQSxlQUNBRyxLQUFBLFNBQUFsTixFQUFBbU4sRUFBQS9HLEVBQUE0RyxHQUNBRyxFQUFBMUQsU0FBQSxrQkFBQUEsU0FBQSxXQUNBdUQsRUFBQSxHQUNBQSxFQUFBLEdBQUE1QixZQUFBK0IsRUFDQUgsRUFBQSxLQUNBQSxFQUFBLEdBQUE1QixZQUFBK0IsTUFzQ0EsSUFBQW9DLEtBQUEvTSxTQUFBNk0sZ0JBQ0FoUSxpQkFBQWtRLElBQUFDLFFBQUEsVUFDQUQsSUFBQUUsZ0JBQUEsa0JBQ0FGLElBQUFHLGNBQUEsZ0JBQ0FILElBQUFJLHNCQUFBLHdCQUNBSixJQUFBSyxVQUFBLFlBQ0FMLElBQUFNLGtCQUFBLG9CQUNBTixJQUFBTyxXQUFBLGFBQ0FQLElBQUFRLG1CQUFBLHFCQUFBLElBQ0EsSUFBQSxNQUFBMVEsaUJBQ0EsS0FBQSw2REFRQSxJQUFBOE8sZ0JBQUExUCxRQUFBRixRQUFBeVIsVUFBQUMsU0FBQSxTQUFBN1EsR0FFQSxJQURBLEdBQUE4USxHQUFBekksS0FBQSxHQUFBMEksV0FDQUQsSUFBQTFOLFNBQUE2TSxrQkFBQWEsRUFBQTdRLGtCQUFBRCxJQUNBOFEsRUFBQUEsRUFBQUMsVUFFQSxPQUFBRCxHQUFBN1Esa0JBQUFELEdBQ0FYLFFBQUFGLFFBQUEyUixHQUVBelIsUUFBQUYsVUFNQSxtQkFBQUUsU0FBQUYsUUFBQXlSLFVBQUFWLE1BQ0E3USxRQUFBRixRQUFBeVIsVUFBQVYsSUFBQSxTQUFBN0osR0FDQSxHQUFBOUQsR0FBQXlPLEVBQUEzUixRQUFBRixTQUVBLEtBREFrSCxFQUFBaEgsUUFBQUYsUUFBQWtILEdBQ0E5RCxFQUFBLEVBQUFBLEVBQUE4RixLQUFBdkosT0FBQXlELElBQ0F5TyxFQUFBbFAsS0FBQXVHLEtBQUE5RixHQUVBLEtBQUFBLEVBQUEsRUFBQUEsRUFBQThELEVBQUF2SCxPQUFBeUQsSUFDQXlPLEVBQUFsUCxLQUFBdUUsRUFBQTlELEdBRUEsT0FBQXlPIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZENob3Igb24gMzAvMTEvMjAxNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ05vZGVYJykuY29udHJvbGxlcignVUlDb250cm9sbGVyJyxmdW5jdGlvbigkc2NvcGUpe1xuICAgICRzY29wZS5BcnJheTE9WzEsMiwzLDQsNV07XG4gICAgJHNjb3BlLkFycmF5Mj1bJ2EnLCdiJywnYycsJ2QnLCdlJ11cbn0pXG4gICAgLmRpcmVjdGl2ZSgnc3ZSb290JywgW2Z1bmN0aW9uKCl7XG4gICAgICAgIGZ1bmN0aW9uIHNob3VsZEJlQWZ0ZXIoZWxlbSwgcG9pbnRlciwgaXNHcmlkKXtcbiAgICAgICAgICAgIHJldHVybiBpc0dyaWQgPyBlbGVtLnggLSBwb2ludGVyLnggPCAwIDogZWxlbS55IC0gcG9pbnRlci55IDwgMDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRTb3J0YWJsZUVsZW1lbnRzKGtleSl7XG4gICAgICAgICAgICByZXR1cm4gUk9PVFNfTUFQW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU29ydGFibGVFbGVtZW50cyhrZXkpe1xuICAgICAgICAgICAgZGVsZXRlIFJPT1RTX01BUFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNvcnRpbmdJblByb2dyZXNzO1xuICAgICAgICB2YXIgUk9PVFNfTUFQID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgLy8gd2luZG93LlJPT1RTX01BUCA9IFJPT1RTX01BUDsgLy8gZm9yIGRlYnVnIHB1cnBvc2VzXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckYXR0cnMnLCAnJGludGVycG9sYXRlJywgJyRwYXJzZScsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCAkaW50ZXJwb2xhdGUsICRwYXJzZSl7XG4gICAgICAgICAgICAgICAgdmFyIG1hcEtleSA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMuc3ZSb290KSgkc2NvcGUpIHx8ICRzY29wZS4kaWQ7XG4gICAgICAgICAgICAgICAgaWYoIVJPT1RTX01BUFttYXBLZXldKSBST09UU19NQVBbbWFwS2V5XSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgICAgICAgICA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZXM7ICAvLyBzZXQgb2YgcG9zc2libGUgZGVzdGluYXRpb25zXG4gICAgICAgICAgICAgICAgdmFyICRwbGFjZWhvbGRlcjsvLyBwbGFjZWhvbGRlciBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnM7ICAgICAvLyBzb3J0YWJsZSBvcHRpb25zXG4gICAgICAgICAgICAgICAgdmFyICRoZWxwZXI7ICAgICAvLyBoZWxwZXIgZWxlbWVudCAtIHRoZSBvbmUgdGhhdHMgYmVpbmcgZHJhZ2dlZCBhcm91bmQgd2l0aCB0aGUgbW91c2UgcG9pbnRlclxuICAgICAgICAgICAgICAgIHZhciAkb3JpZ2luYWw7ICAgLy8gb3JpZ2luYWwgZWxlbWVudFxuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0OyAgICAgLy8gbGFzdCBiZXN0IGNhbmRpZGF0ZVxuICAgICAgICAgICAgICAgIHZhciBpc0dyaWQgICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgb25Tb3J0ICAgICAgID0gJHBhcnNlKCRhdHRycy5zdk9uU29ydCk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tLSBoYWNrIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy84MDQ0XG4gICAgICAgICAgICAgICAgJGF0dHJzLnN2T25TdGFydCA9ICRhdHRycy4kJGVsZW1lbnRbMF0uYXR0cmlidXRlc1snc3Ytb24tc3RhcnQnXTtcbiAgICAgICAgICAgICAgICAkYXR0cnMuc3ZPblN0YXJ0ID0gJGF0dHJzLnN2T25TdGFydCAmJiAkYXR0cnMuc3ZPblN0YXJ0LnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgJGF0dHJzLnN2T25TdG9wID0gJGF0dHJzLiQkZWxlbWVudFswXS5hdHRyaWJ1dGVzWydzdi1vbi1zdG9wJ107XG4gICAgICAgICAgICAgICAgJGF0dHJzLnN2T25TdG9wID0gJGF0dHJzLnN2T25TdG9wICYmICRhdHRycy5zdk9uU3RvcC52YWx1ZTtcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgICAgICAgICB2YXIgb25TdGFydCA9ICRwYXJzZSgkYXR0cnMuc3ZPblN0YXJ0KTtcbiAgICAgICAgICAgICAgICB2YXIgb25TdG9wID0gJHBhcnNlKCRhdHRycy5zdk9uU3RvcCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRpbmdJblByb2dyZXNzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcnRpbmdJblByb2dyZXNzO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZigkYXR0cnMuc3ZHcmlkKXsgLy8gc3YtZ3JpZCBkZXRlcm1pbmVkIGV4cGxpY2l0ZVxuICAgICAgICAgICAgICAgICAgICBpc0dyaWQgPSAkYXR0cnMuc3ZHcmlkID09PSBcInRydWVcIiA/IHRydWUgOiAkYXR0cnMuc3ZHcmlkID09PSBcImZhbHNlXCIgPyBmYWxzZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmKGlzR3JpZCA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIHZhbHVlIG9mIHN2LWdyaWQgYXR0cmlidXRlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBsaXN0cyBoYXZlIGEgZ3JpZCBsaWtlIGxheW91dFxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFNvcnRhYmxlRWxlbWVudHMobWFwS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oY29sbGVjdGlvbil7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0dyaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IGNvbGxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5jb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogaXRlbS5nZXRQYXJ0KCkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGl0ZW0uZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpY3RbaXRlbS5wYXJ0XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdFtpdGVtLnBhcnRdLnB1c2goaXRlbS55KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RbaXRlbS5wYXJ0XSA9IFtpdGVtLnldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkaWN0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdFtrZXldLnNvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0W2tleV0uZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4IDwgZGljdFtrZXldLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbSA+IDAgJiYgaXRlbSA9PT0gZGljdFtrZXldW2luZGV4ICsgMV0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRtb3ZlVXBkYXRlID0gZnVuY3Rpb24ob3B0cywgbW91c2UsIHN2RWxlbWVudCwgc3ZPcmlnaW5hbCwgc3ZQbGFjZWhvbGRlciwgb3JpZ2luYXRpbmdQYXJ0LCBvcmlnaW5hdGluZ0luZGV4KXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN2UmVjdCA9IHN2RWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0cy50b2xlcmFuY2UgPT09ICdlbGVtZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IH5+KHN2UmVjdC5sZWZ0ICsgc3ZSZWN0LndpZHRoLzIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IH5+KHN2UmVjdC50b3AgKyBzdlJlY3QuaGVpZ2h0LzIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHNvcnRpbmdJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZighJHBsYWNlaG9sZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN2UGxhY2Vob2xkZXIpeyAvLyBjdXN0b20gcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIgPSBzdlBsYWNlaG9sZGVyLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKCduZy1oaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNleyAvLyBkZWZhdWx0IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyID0gc3ZPcmlnaW5hbC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hZGRDbGFzcygnc3YtdmlzaWJpbGl0eS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuYWRkQ2xhc3MoJ3N2LXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiBzdlJlY3QuaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogc3ZSZWN0LndpZHRoICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdk9yaWdpbmFsLmFmdGVyKCRwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdk9yaWdpbmFsLmFkZENsYXNzKCduZy1oaWRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlIG9wdGlvbnMsIGhlbHBlciBhbmQgb3JpZ2luYWwgZWxlbWVudCByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcmlnaW5hbCA9IHN2T3JpZ2luYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICRoZWxwZXIgPSBzdkVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQoJHNjb3BlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhlbHBlcjoge2VsZW1lbnQ6ICRoZWxwZXJ9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXJ0OiBvcmlnaW5hdGluZ1BhcnQubW9kZWwob3JpZ2luYXRpbmdQYXJ0LnNjb3BlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5kZXg6IG9yaWdpbmF0aW5nSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW06IG9yaWdpbmF0aW5nUGFydC5tb2RlbChvcmlnaW5hdGluZ1BhcnQuc2NvcGUpW29yaWdpbmF0aW5nSW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcm9vdCAmJiAkc2NvcGUuJHJvb3QuJCRwaGFzZSB8fCAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLSBtb3ZlIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICRoZWxwZXJbMF0ucmVwb3NpdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBtb3VzZS54ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IC0gbW91c2Uub2Zmc2V0Lngqc3ZSZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogbW91c2UueSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIC0gbW91c2Uub2Zmc2V0Lnkqc3ZSZWN0LmhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLSBtYW5hZ2UgY2FuZGlkYXRlc1xuICAgICAgICAgICAgICAgICAgICBnZXRTb3J0YWJsZUVsZW1lbnRzKG1hcEtleSkuZm9yRWFjaChmdW5jdGlvbihzZSwgaW5kZXgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYob3B0cy5jb250YWlubWVudCAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBvcHRpbWl6ZSB0aGlzIHNpbmNlIGl0IGNvdWxkIGJlIGNhbGN1bGF0ZWQgb25seSBvbmNlIHdoZW4gdGhlIG1vdmluZyBiZWdpbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWVsZW1lbnRNYXRjaGVzU2VsZWN0b3Ioc2UuZWxlbWVudCwgb3B0cy5jb250YWlubWVudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWVsZW1lbnRNYXRjaGVzU2VsZWN0b3Ioc2UuZWxlbWVudCwgb3B0cy5jb250YWlubWVudCArICcgKicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSByZXR1cm47IC8vIGVsZW1lbnQgaXMgbm90IHdpdGhpbiBhbGxvd2VkIGNvbnRhaW5tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IHNlLmVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IH5+KHJlY3QubGVmdCArIHJlY3Qud2lkdGgvMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogfn4ocmVjdC50b3AgKyByZWN0LmhlaWdodC8yKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzZS5jb250YWluZXIgJiYgLy8gbm90IHRoZSBjb250YWluZXIgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZS5lbGVtZW50WzBdLnNjcm9sbEhlaWdodCB8fCBzZS5lbGVtZW50WzBdLnNjcm9sbFdpZHRoKSl7IC8vIGVsZW1lbnQgaXMgdmlzaWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHNlLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHE6IChjZW50ZXIueCAtIG1vdXNlLngpKihjZW50ZXIueCAtIG1vdXNlLngpICsgKGNlbnRlci55IC0gbW91c2UueSkqKGNlbnRlci55IC0gbW91c2UueSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IHNlLmdldFBhcnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXg6IHNlLmdldEluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyOiBzaG91bGRCZUFmdGVyKGNlbnRlciwgbW91c2UsIGlzR3JpZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlLmNvbnRhaW5lciAmJiAhc2UuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdbc3YtZWxlbWVudF06bm90KC5zdi1wbGFjZWhvbGRlcik6bm90KC5zdi1zb3VyY2UpJykpeyAvLyBlbXB0eSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBzZS5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxOiAoY2VudGVyLnggLSBtb3VzZS54KSooY2VudGVyLnggLSBtb3VzZS54KSArIChjZW50ZXIueSAtIG1vdXNlLnkpKihjZW50ZXIueSAtIG1vdXNlLnkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBzZS5nZXRQYXJ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwUmVjdCA9ICRwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBDZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB+fihwUmVjdC5sZWZ0ICsgcFJlY3Qud2lkdGgvMiksXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB+fihwUmVjdC50b3AgKyBwUmVjdC5oZWlnaHQvMilcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHE6IChwQ2VudGVyLnggLSBtb3VzZS54KSoocENlbnRlci54IC0gbW91c2UueCkgKyAocENlbnRlci55IC0gbW91c2UueSkqKHBDZW50ZXIueSAtIG1vdXNlLnkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJHBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuc29ydChmdW5jdGlvbihhLCBiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnEgLSBiLnE7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuZm9yRWFjaChmdW5jdGlvbihjYW5kLCBpbmRleCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gMCAmJiAhY2FuZC5wbGFjZWhvbGRlciAmJiAhY2FuZC5jb250YWluZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0YXJnZXQgPSBjYW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmQuZWxlbWVudC5hZGRDbGFzcygnc3YtY2FuZGlkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FuZC5hZnRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZC5lbGVtZW50LmFmdGVyKCRwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRFbGVtZW50QmVmb3JlKGNhbmQuZWxlbWVudCwgJHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoaW5kZXggPT09IDAgJiYgY2FuZC5jb250YWluZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0YXJnZXQgPSBjYW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmQuZWxlbWVudC5hcHBlbmQoJHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kLmVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3N2LWNhbmRpZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcCA9IGZ1bmN0aW9uKG9yaWdpbmF0aW5nUGFydCwgaW5kZXgsIG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgICAgICBpZighJHBsYWNlaG9sZGVyKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYob3B0aW9ucy5yZXZlcnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyUmVjdCA9ICRwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWxwZXJSZWN0ID0gJGhlbHBlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhoZWxwZXJSZWN0LnRvcCAtIHBsYWNlaG9sZGVyUmVjdC50b3AsIDIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhoZWxwZXJSZWN0LmxlZnQgLSBwbGFjZWhvbGRlclJlY3QubGVmdCwgMilcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICtvcHRpb25zLnJldmVydCpkaXN0YW5jZS8yMDA7IC8vIGNvbnN0YW50IHNwZWVkOiBkdXJhdGlvbiBkZXBlbmRzIG9uIGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGgubWluKGR1cmF0aW9uLCArb3B0aW9ucy5yZXZlcnQpOyAvLyBob3dldmVyIGl0J3Mgbm90IGxvbmdlciB0aGF0IG9wdGlvbnMucmV2ZXJ0XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLScsICctby0nLCAnJ10uZm9yRWFjaChmdW5jdGlvbihwcmVmaXgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiAkaGVscGVyWzBdLnN0eWxlW3ByZWZpeCArICd0cmFuc2l0aW9uJ10gIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRoZWxwZXJbMF0uc3R5bGVbcHJlZml4ICsgJ3RyYW5zaXRpb24nXSA9ICdhbGwgJyArIGR1cmF0aW9uICsgJ21zIGVhc2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFmdGVyUmV2ZXJ0LCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaGVscGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IHBsYWNlaG9sZGVyUmVjdC50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBwbGFjZWhvbGRlclJlY3QubGVmdCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArICdweCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyUmV2ZXJ0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXJSZXZlcnQoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRpbmdJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaGVscGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJG9yaWdpbmFsLnJlbW92ZUNsYXNzKCduZy1oaWRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGhlbHBlciA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcmlnaW5hbCA9IHZvaWQgMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3Ytb24tc3RvcCBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgb25TdG9wKCRzY29wZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXJ0OiBvcmlnaW5hdGluZ1BhcnQubW9kZWwob3JpZ2luYXRpbmdQYXJ0LnNjb3BlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtOiBvcmlnaW5hdGluZ1BhcnQubW9kZWwob3JpZ2luYXRpbmdQYXJ0LnNjb3BlKVtpbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkdGFyZ2V0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3N2LWNhbmRpZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGxpY2VkID0gb3JpZ2luYXRpbmdQYXJ0Lm1vZGVsKG9yaWdpbmF0aW5nUGFydC5zY29wZSkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5kZXggPSAkdGFyZ2V0LnRhcmdldEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR0YXJnZXQudmlldyA9PT0gb3JpZ2luYXRpbmdQYXJ0ICYmICR0YXJnZXQudGFyZ2V0SW5kZXggPiBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkdGFyZ2V0LmFmdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0YXJnZXQudmlldy5tb2RlbCgkdGFyZ2V0LnZpZXcuc2NvcGUpLnNwbGljZSh0YXJnZXRJbmRleCwgMCwgc3BsaWNlZFswXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdi1vbi1zb3J0IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHRhcmdldC52aWV3ICE9PSBvcmlnaW5hdGluZ1BhcnQgfHwgaW5kZXggIT09IHRhcmdldEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNvcnQoJHNjb3BlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFydFRvOiAkdGFyZ2V0LnZpZXcubW9kZWwoJHRhcmdldC52aWV3LnNjb3BlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXJ0RnJvbTogb3JpZ2luYXRpbmdQYXJ0Lm1vZGVsKG9yaWdpbmF0aW5nUGFydC5zY29wZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbTogc3BsaWNlZFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbmRleFRvOiB0YXJnZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbmRleEZyb206IGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHJvb3QgJiYgJHNjb3BlLiRyb290LiQkcGhhc2UgfHwgJHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9Tb3J0YWJsZUVsZW1lbnRzID0gZnVuY3Rpb24oc2Upe1xuICAgICAgICAgICAgICAgICAgICBnZXRTb3J0YWJsZUVsZW1lbnRzKG1hcEtleSkucHVzaChzZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21Tb3J0YWJsZUVsZW1lbnRzID0gZnVuY3Rpb24oc2Upe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBnZXRTb3J0YWJsZUVsZW1lbnRzKG1hcEtleSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGVsZW1zLmluZGV4T2Yoc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA+IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU29ydGFibGVFbGVtZW50cyhtYXBLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnc3ZQYXJ0JywgWyckcGFyc2UnLCBmdW5jdGlvbigkcGFyc2Upe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6ICdec3ZSb290JyxcbiAgICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgJHNjb3BlLiRjdHJsID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFydCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5wYXJ0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuJGRyb3AgPSBmdW5jdGlvbihpbmRleCwgb3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRzb3J0YWJsZVJvb3QuJGRyb3AoJHNjb3BlLnBhcnQsIGluZGV4LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dLFxuICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkc29ydGFibGUpe1xuICAgICAgICAgICAgaWYoISRhdHRycy5zdlBhcnQpIHRocm93IG5ldyBFcnJvcignbm8gbW9kZWwgcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9ICRwYXJzZSgkYXR0cnMuc3ZQYXJ0KTtcbiAgICAgICAgICAgIGlmKCFtb2RlbC5hc3NpZ24pIHRocm93IG5ldyBFcnJvcignbW9kZWwgbm90IGFzc2lnbmFibGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnBhcnQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICRzY29wZS4kaWQsXG4gICAgICAgICAgICAgICAgZWxlbWVudDogJGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsLFxuICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc2NvcGUuJHNvcnRhYmxlUm9vdCA9ICRzb3J0YWJsZTtcblxuICAgICAgICAgICAgdmFyIHNvcnRhYmxlUGFydCA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiAkZWxlbWVudCxcbiAgICAgICAgICAgICAgICBnZXRQYXJ0OiAkc2NvcGUuJGN0cmwuZ2V0UGFydCxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc29ydGFibGUuYWRkVG9Tb3J0YWJsZUVsZW1lbnRzKHNvcnRhYmxlUGFydCk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNvcnRhYmxlLnJlbW92ZUZyb21Tb3J0YWJsZUVsZW1lbnRzKHNvcnRhYmxlUGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSlcbiAgICAuZGlyZWN0aXZlKCdzdkVsZW1lbnQnLCBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogWydec3ZQYXJ0JywgJ15zdlJvb3QnXSxcbiAgICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgJHNjb3BlLiRjdHJsID0gdGhpcztcbiAgICAgICAgfV0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGNvbnRyb2xsZXJzKXtcbiAgICAgICAgICAgIHZhciBzb3J0YWJsZUVsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogJGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgZ2V0UGFydDogJGNvbnRyb2xsZXJzWzBdLmdldFBhcnQsXG4gICAgICAgICAgICAgICAgZ2V0SW5kZXg6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuJGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkY29udHJvbGxlcnNbMV0uYWRkVG9Tb3J0YWJsZUVsZW1lbnRzKHNvcnRhYmxlRWxlbWVudCk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJGNvbnRyb2xsZXJzWzFdLnJlbW92ZUZyb21Tb3J0YWJsZUVsZW1lbnRzKHNvcnRhYmxlRWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGhhbmRsZSA9ICRlbGVtZW50O1xuICAgICAgICAgICAgaGFuZGxlLm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIG9uTW91c2Vkb3duKTtcbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJyRjdHJsLmhhbmRsZScsIGZ1bmN0aW9uKGN1c3RvbUhhbmRsZSl7XG4gICAgICAgICAgICAgICAgaWYoY3VzdG9tSGFuZGxlKXtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlLm9mZignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBvbk1vdXNlZG93bik7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZSA9IGN1c3RvbUhhbmRsZTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlLm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIG9uTW91c2Vkb3duKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGhlbHBlcjtcbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJyRjdHJsLmhlbHBlcicsIGZ1bmN0aW9uKGN1c3RvbUhlbHBlcil7XG4gICAgICAgICAgICAgICAgaWYoY3VzdG9tSGVscGVyKXtcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyID0gY3VzdG9tSGVscGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCckY3RybC5wbGFjZWhvbGRlcicsIGZ1bmN0aW9uKGN1c3RvbVBsYWNlaG9sZGVyKXtcbiAgICAgICAgICAgICAgICBpZihjdXN0b21QbGFjZWhvbGRlcil7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gY3VzdG9tUGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBib2R5ID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgdmFyIGh0bWwgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblxuICAgICAgICAgICAgdmFyIG1vdmVFeGVjdXRlZDtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Nb3VzZWRvd24oZSl7XG4gICAgICAgICAgICAgICAgdG91Y2hGaXgoZSk7XG5cbiAgICAgICAgICAgICAgICBpZigkY29udHJvbGxlcnNbMV0uc29ydGluZ0luUHJvZ3Jlc3MoKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uICE9IDAgJiYgZS50eXBlID09PSAnbW91c2Vkb3duJykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgbW92ZUV4ZWN1dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG9wdHMgPSAkcGFyc2UoJGF0dHJzLnN2RWxlbWVudCkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICBvcHRzID0gYW5ndWxhci5leHRlbmQoe30sIHtcbiAgICAgICAgICAgICAgICAgICAgdG9sZXJhbmNlOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIHJldmVydDogMjAwLFxuICAgICAgICAgICAgICAgICAgICBjb250YWlubWVudDogJ2h0bWwnXG4gICAgICAgICAgICAgICAgfSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgaWYob3B0cy5jb250YWlubWVudCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWlubWVudFJlY3QgPSBjbG9zZXN0RWxlbWVudC5jYWxsKCRlbGVtZW50LCBvcHRzLmNvbnRhaW5tZW50KVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFJlY3QgPSAkZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmU7XG5cbiAgICAgICAgICAgICAgICBpZighaGVscGVyKSBoZWxwZXIgPSAkY29udHJvbGxlcnNbMF0uaGVscGVyO1xuICAgICAgICAgICAgICAgIGlmKCFwbGFjZWhvbGRlcikgcGxhY2Vob2xkZXIgPSAkY29udHJvbGxlcnNbMF0ucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgaWYoaGVscGVyKXtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBoZWxwZXIuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucmVtb3ZlQ2xhc3MoJ25nLWhpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogY2xpZW50UmVjdC5sZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0b3AnOiBjbGllbnRSZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKCdzdi12aXNpYmlsaXR5LWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHRhcmdldC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5hZGRDbGFzcygnc3YtaGVscGVyJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogY2xpZW50UmVjdC5sZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0b3AnOiBjbGllbnRSZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6IGNsaWVudFJlY3Qud2lkdGggKyAncHgnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNsb25lWzBdLnJlcG9zaXRpb24gPSBmdW5jdGlvbihjb29yZHMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0TGVmdCA9IGNvb3Jkcy54O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VG9wID0gY29vcmRzLnk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWxwZXJSZWN0ID0gY2xvbmVbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhaW5tZW50UmVjdCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXRUb3AgPCBjb250YWlubWVudFJlY3QudG9wICsgYm9keS5zY3JvbGxUb3ApIC8vIHRvcCBib3VuZGFyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFRvcCA9IGNvbnRhaW5tZW50UmVjdC50b3AgKyBib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFRvcCArIGhlbHBlclJlY3QuaGVpZ2h0ID4gY29udGFpbm1lbnRSZWN0LnRvcCArIGJvZHkuc2Nyb2xsVG9wICsgY29udGFpbm1lbnRSZWN0LmhlaWdodCkgLy8gYm90dG9tIGJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gY29udGFpbm1lbnRSZWN0LnRvcCArIGJvZHkuc2Nyb2xsVG9wICsgY29udGFpbm1lbnRSZWN0LmhlaWdodCAtIGhlbHBlclJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0TGVmdCA8IGNvbnRhaW5tZW50UmVjdC5sZWZ0ICsgYm9keS5zY3JvbGxMZWZ0KSAvLyBsZWZ0IGJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IGNvbnRhaW5tZW50UmVjdC5sZWZ0ICsgYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0TGVmdCArIGhlbHBlclJlY3Qud2lkdGggPiBjb250YWlubWVudFJlY3QubGVmdCArIGJvZHkuc2Nyb2xsTGVmdCArIGNvbnRhaW5tZW50UmVjdC53aWR0aCkgLy8gcmlnaHQgYm91bmRhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gY29udGFpbm1lbnRSZWN0LmxlZnQgKyBib2R5LnNjcm9sbExlZnQgKyBjb250YWlubWVudFJlY3Qud2lkdGggLSBoZWxwZXJSZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUubGVmdCA9IHRhcmdldExlZnQgLSBib2R5LnNjcm9sbExlZnQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLnRvcCA9IHRhcmdldFRvcCAtIGJvZHkuc2Nyb2xsVG9wICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ZXJPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHg6IChlLmNsaWVudFggLSBjbGllbnRSZWN0LmxlZnQpL2NsaWVudFJlY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHk6IChlLmNsaWVudFkgLSBjbGllbnRSZWN0LnRvcCkvY2xpZW50UmVjdC5oZWlnaHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGh0bWwuYWRkQ2xhc3MoJ3N2LXNvcnRpbmctaW4tcHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgICBodG1sLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgb25Nb3VzZW1vdmUpLm9uKCdtb3VzZXVwIHRvdWNoZW5kIHRvdWNoY2FuY2VsJywgZnVuY3Rpb24gbW91c2V1cChlKXtcbiAgICAgICAgICAgICAgICAgICAgaHRtbC5vZmYoJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBvbk1vdXNlbW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwub2ZmKCdtb3VzZXVwIHRvdWNoZW5kIHRvdWNoY2FuY2VsJywgbW91c2V1cCk7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2xhc3MoJ3N2LXNvcnRpbmctaW4tcHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYobW92ZUV4ZWN1dGVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250cm9sbGVyc1swXS4kZHJvcCgkc2NvcGUuJGluZGV4LCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnc3YtdmlzaWJpbGl0eS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIG9uTW91c2Vtb3ZlKGUpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uTW91c2Vtb3ZlKGUpe1xuICAgICAgICAgICAgICAgICAgICB0b3VjaEZpeChlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIW1vdmVFeGVjdXRlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5wYXJlbnQoKS5wcmVwZW5kKGNsb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVFeGVjdXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJGNvbnRyb2xsZXJzWzFdLiRtb3ZlVXBkYXRlKG9wdHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogcG9pbnRlck9mZnNldFxuICAgICAgICAgICAgICAgICAgICB9LCBjbG9uZSwgJGVsZW1lbnQsIHBsYWNlaG9sZGVyLCAkY29udHJvbGxlcnNbMF0uZ2V0UGFydCgpLCAkc2NvcGUuJGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufV0pXG4gICAgLmRpcmVjdGl2ZSgnc3ZIYW5kbGUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmU6ICc/XnN2RWxlbWVudCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGN0cmwpe1xuICAgICAgICAgICAgaWYoJGN0cmwpXG4gICAgICAgICAgICAgICAgJGN0cmwuaGFuZGxlID0gJGVsZW1lbnQuYWRkKCRjdHJsLmhhbmRsZSk7IC8vIHN1cHBvcnQgbXVsdGlwbGUgaGFuZGxlc1xuICAgICAgICB9XG4gICAgfTtcbn0pXG4gICAgLmRpcmVjdGl2ZSgnc3ZIZWxwZXInLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmU6IFsnP15zdlBhcnQnLCAnP15zdkVsZW1lbnQnXSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCl7XG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnc3YtaGVscGVyJykuYWRkQ2xhc3MoJ25nLWhpZGUnKTtcbiAgICAgICAgICAgIGlmKCRjdHJsWzFdKVxuICAgICAgICAgICAgICAgICRjdHJsWzFdLmhlbHBlciA9ICRlbGVtZW50O1xuICAgICAgICAgICAgZWxzZSBpZigkY3RybFswXSlcbiAgICAgICAgICAgICAgICAkY3RybFswXS5oZWxwZXIgPSAkZWxlbWVudDtcbiAgICAgICAgfVxuICAgIH07XG59KVxuICAgIC5kaXJlY3RpdmUoJ3N2UGxhY2Vob2xkZXInLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmU6IFsnP15zdlBhcnQnLCAnP15zdkVsZW1lbnQnXSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCl7XG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnc3YtcGxhY2Vob2xkZXInKS5hZGRDbGFzcygnbmctaGlkZScpO1xuICAgICAgICAgICAgaWYoJGN0cmxbMV0pXG4gICAgICAgICAgICAgICAgJGN0cmxbMV0ucGxhY2Vob2xkZXIgPSAkZWxlbWVudDtcbiAgICAgICAgICAgIGVsc2UgaWYoJGN0cmxbMF0pXG4gICAgICAgICAgICAgICAgJGN0cmxbMF0ucGxhY2Vob2xkZXIgPSAkZWxlbWVudDtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuZnVuY3Rpb24gdG91Y2hGaXgoZSl7XG4gICAgaWYoISgnY2xpZW50WCcgaW4gZSkgJiYgISgnY2xpZW50WScgaW4gZSkpIHtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBlLnRvdWNoZXMgfHwgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XG4gICAgICAgIGlmKHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGUuY2xpZW50WCA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIGUuY2xpZW50WSA9IHRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcmV2aW91c1NpYmxpbmcoZWxlbWVudCl7XG4gICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgaWYoZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKVxuICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyk7XG4gICAgZWxzZXtcbiAgICAgICAgdmFyIHNpYiA9IGVsZW1lbnQucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB3aGlsZShzaWIgIT0gbnVsbCAmJiBzaWIubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgIHNpYiA9IHNpYi5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIHJldHVybiBhbmd1bGFyLmVsZW1lbnQoc2liKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydEVsZW1lbnRCZWZvcmUoZWxlbWVudCwgbmV3RWxlbWVudCl7XG4gICAgdmFyIHByZXZTaWJsID0gZ2V0UHJldmlvdXNTaWJsaW5nKGVsZW1lbnQpO1xuICAgIGlmKHByZXZTaWJsLmxlbmd0aCA+IDApe1xuICAgICAgICBwcmV2U2libC5hZnRlcihuZXdFbGVtZW50KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wcmVwZW5kKG5ld0VsZW1lbnQpO1xuICAgIH1cbn1cblxudmFyIGRkZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICBtYXRjaGluZ0Z1bmN0aW9uID0gZGRlLm1hdGNoZXMgPyAnbWF0Y2hlcycgOlxuICAgICAgICBkZGUubWF0Y2hlc1NlbGVjdG9yID8gJ21hdGNoZXNTZWxlY3RvcicgOlxuICAgICAgICAgICAgZGRlLndlYmtpdE1hdGNoZXMgPyAnd2Via2l0TWF0Y2hlcycgOlxuICAgICAgICAgICAgICAgIGRkZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgPyAnd2Via2l0TWF0Y2hlc1NlbGVjdG9yJyA6XG4gICAgICAgICAgICAgICAgICAgIGRkZS5tc01hdGNoZXMgPyAnbXNNYXRjaGVzJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZGUubXNNYXRjaGVzU2VsZWN0b3IgPyAnbXNNYXRjaGVzU2VsZWN0b3InIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZGUubW96TWF0Y2hlcyA/ICdtb3pNYXRjaGVzJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRkZS5tb3pNYXRjaGVzU2VsZWN0b3IgPyAnbW96TWF0Y2hlc1NlbGVjdG9yJyA6IG51bGw7XG5pZihtYXRjaGluZ0Z1bmN0aW9uID09IG51bGwpXG4gICAgdGhyb3cgJ1RoaXMgYnJvd3NlciBkb2VzblxcJ3Qgc3VwcG9ydCB0aGUgSFRNTEVsZW1lbnQubWF0Y2hlcyBtZXRob2QnO1xuXG5mdW5jdGlvbiBlbGVtZW50TWF0Y2hlc1NlbGVjdG9yKGVsZW1lbnQsIHNlbGVjdG9yKXtcbiAgICBpZihlbGVtZW50IGluc3RhbmNlb2YgYW5ndWxhci5lbGVtZW50KSBlbGVtZW50ID0gZWxlbWVudFswXTtcbiAgICBpZihtYXRjaGluZ0Z1bmN0aW9uICE9PSBudWxsKVxuICAgICAgICByZXR1cm4gZWxlbWVudFttYXRjaGluZ0Z1bmN0aW9uXShzZWxlY3Rvcik7XG59XG5cbnZhciBjbG9zZXN0RWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCB8fCBmdW5jdGlvbiAoc2VsZWN0b3Ipe1xuICAgICAgICB2YXIgZWwgPSB0aGlzWzBdLnBhcmVudE5vZGU7XG4gICAgICAgIHdoaWxlKGVsICE9PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgIWVsW21hdGNoaW5nRnVuY3Rpb25dKHNlbGVjdG9yKSlcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICBpZihlbFttYXRjaGluZ0Z1bmN0aW9uXShzZWxlY3RvcikpXG4gICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgpO1xuICAgIH07XG5cbi8qXG4gU2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIGpRdWVyeSdzIC5hZGQgbWV0aG9kXG4gKi9cbmlmKHR5cGVvZiBhbmd1bGFyLmVsZW1lbnQucHJvdG90eXBlLmFkZCAhPT0gJ2Z1bmN0aW9uJyl7XG4gICAgYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgdmFyIGksIHJlcyA9IGFuZ3VsYXIuZWxlbWVudCgpO1xuICAgICAgICBlbGVtID0gYW5ndWxhci5lbGVtZW50KGVsZW0pO1xuICAgICAgICBmb3IoaT0wO2k8dGhpcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIHJlcy5wdXNoKHRoaXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGZvcihpPTA7aTxlbGVtLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgcmVzLnB1c2goZWxlbVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xufVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZENob3Igb24gMzAvMTEvMjAxNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ05vZGVYJywgWyduZ1JvdXRlJywgJ3VpLnJvdXRlcicsICduZ01hdGVyaWFsJywgJ25nQW5pbWF0ZSddKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsZnVuY3Rpb24oKXtcblxufSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZENob3Igb24gMzAvMTEvMjAxNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ05vZGVYJykuY29uc3RhbnQoXCJjb25maWdcIiwge1xuICAgIGJhY2tlbmRVcmxQcmVmaXg6ICcvYXBpJ1xuXG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgRWR3YXJkQ2hvciBvbiAzMC8xMS8yMDE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnTm9kZVgnKS5jb25maWcoZnVuY3Rpb24oJHVybFJvdXRlclByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcil7XG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgLnN0YXRlKCdmdW5rdScse1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6J3ZpZXdzL0Z1bmtVLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonRnVua1VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2NhbnZhcycse1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6J3ZpZXdzL2NhbnZhcy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0NhbnZhc0NvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgndWknLHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOid2aWV3cy91aS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J1VJQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdhbmltYXRpb24nLHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOid2aWV3cy9hbmltYXRpb24uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidGbGFzaENvbnRyb2xsZXInXG5cbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdwYXBlcicse1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6J3ZpZXdzL3BhcGVyLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonUGFwZXJDb250cm9sbGVyJ1xuICAgICAgICB9KTtcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKVxufSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZENob3Igb24gMzAvMTEvMjAxNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ05vZGVYJykuY29udHJvbGxlcignQ2FudmFzQ29udHJvbGxlcicsZnVuY3Rpb24oJHNjb3BlKXtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgLy9MZXRzIHJlc2l6ZSB0aGUgY2FudmFzIHRvIG9jY3VweSB0aGUgZnVsbCBwYWdlXG4gICAgICAgIHZhciBXID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciBIID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjYW52YXMud2lkdGggPSBXO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gSDtcblxuICAgICAgICAvL1NvbWUgdmFyaWFibGVzXG4gICAgICAgIHZhciBsZW5ndGgsIGRpdmVyZ2VuY2UsIHJlZHVjdGlvbiwgbGluZV93aWR0aCwgc3RhcnRfcG9pbnRzID0gW107XG5cbiAgICAgICAgaW5pdCgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvL2ZpbGxpbmcgdGhlIGNhbnZhcyB3aGl0ZVxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBXLCBIKTtcblxuICAgICAgICAgICAgLy9MZXRzIGRyYXcgdGhlIHRydW5rIG9mIHRoZSB0cmVlXG4gICAgICAgICAgICAvL2xldHMgcmFuZG9taXNlIHRoZSB2YXJpYWJsZXNcbiAgICAgICAgICAgIC8vbGVuZ3RoIG9mIHRoZSB0cnVuayAtIDEwMC0xNTBcbiAgICAgICAgICAgIGxlbmd0aCA9IDEwMCArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSo1MCk7XG4gICAgICAgICAgICAvL2FuZ2xlIGF0IHdoaWNoIGJyYW5jaGVzIHdpbGwgZGl2ZXJnZSAtIDEwLTYwXG4gICAgICAgICAgICBkaXZlcmdlbmNlID0gMTAgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqNTApO1xuICAgICAgICAgICAgLy9FdmVyeSBicmFuY2ggd2lsbCBiZSAwLjc1dGltZXMgb2YgdGhlIHByZXZpb3VzIG9uZSAtIDAuNS0wLjc1XG4gICAgICAgICAgICAvL3dpdGggMiBkZWNpbWFsIHBvaW50c1xuICAgICAgICAgICAgcmVkdWN0aW9uID0gTWF0aC5yb3VuZCg1MCArIE1hdGgucmFuZG9tKCkqMjApLzEwMDtcbiAgICAgICAgICAgIC8vd2lkdGggb2YgdGhlIGJyYW5jaC90cnVua1xuICAgICAgICAgICAgbGluZV93aWR0aCA9IDEwO1xuXG4gICAgICAgICAgICAvL1RoaXMgaXMgdGhlIGVuZCBwb2ludCBvZiB0aGUgdHJ1bmssIGZyb20gd2hlcmUgYnJhbmNoZXMgd2lsbCBkaXZlcmdlXG4gICAgICAgICAgICB2YXIgdHJ1bmsgPSB7eDogVy8yLCB5OiBsZW5ndGgrNTAsIGFuZ2xlOiA5MH07XG4gICAgICAgICAgICAvL0l0IGJlY29tZXMgdGhlIHN0YXJ0IHBvaW50IGZvciBicmFuY2hlc1xuICAgICAgICAgICAgc3RhcnRfcG9pbnRzID0gW107IC8vZW1wdHkgdGhlIHN0YXJ0IHBvaW50cyBvbiBldmVyeSBpbml0KCk7XG4gICAgICAgICAgICBzdGFydF9wb2ludHMucHVzaCh0cnVuayk7XG5cbiAgICAgICAgICAgIC8vWSBjb29yZGluYXRlcyBnbyBwb3NpdGl2ZSBkb3dud2FyZHMsIGhlbmNlIHRoZXkgYXJlIGludmVydGVkIGJ5IGRlZHVjdGluZyBpdFxuICAgICAgICAgICAgLy9mcm9tIHRoZSBjYW52YXMgaGVpZ2h0ID0gSFxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh0cnVuay54LCBILTUwKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8odHJ1bmsueCwgSC10cnVuay55KTtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiYnJvd25cIjtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lX3dpZHRoO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBicmFuY2hlcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9MZXRzIGRyYXcgdGhlIGJyYW5jaGVzIG5vd1xuICAgICAgICBmdW5jdGlvbiBicmFuY2hlcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vcmVkdWNpbmcgbGluZV93aWR0aCBhbmQgbGVuZ3RoXG4gICAgICAgICAgICBsZW5ndGggPSBsZW5ndGggKiByZWR1Y3Rpb247XG4gICAgICAgICAgICBsaW5lX3dpZHRoID0gbGluZV93aWR0aCAqIHJlZHVjdGlvbjtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lX3dpZHRoO1xuXG4gICAgICAgICAgICB2YXIgbmV3X3N0YXJ0X3BvaW50cyA9IFtdO1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN0YXJ0X3BvaW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgc3AgPSBzdGFydF9wb2ludHNbaV07XG4gICAgICAgICAgICAgICAgLy8yIGJyYW5jaGVzIHdpbGwgY29tZSBvdXQgb2YgZXZlcnkgc3RhcnQgcG9pbnQuIEhlbmNlIHRoZXJlIHdpbGwgYmVcbiAgICAgICAgICAgICAgICAvLzIgZW5kIHBvaW50cy4gVGhlcmUgaXMgYSBkaWZmZXJlbmNlIGluIHRoZSBkaXZlcmdlbmNlLlxuICAgICAgICAgICAgICAgIHZhciBlcDEgPSBnZXRfZW5kcG9pbnQoc3AueCwgc3AueSwgc3AuYW5nbGUrZGl2ZXJnZW5jZSwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB2YXIgZXAyID0gZ2V0X2VuZHBvaW50KHNwLngsIHNwLnksIHNwLmFuZ2xlLWRpdmVyZ2VuY2UsIGxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICAvL2RyYXdpbmcgdGhlIGJyYW5jaGVzIG5vd1xuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oc3AueCwgSC1zcC55KTtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKGVwMS54LCBILWVwMS55KTtcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHNwLngsIEgtc3AueSk7XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhlcDIueCwgSC1lcDIueSk7XG5cbiAgICAgICAgICAgICAgICAvL1RpbWUgdG8gbWFrZSB0aGlzIGZ1bmN0aW9uIHJlY3Vyc2l2ZSB0byBkcmF3IG1vcmUgYnJhbmNoZXNcbiAgICAgICAgICAgICAgICBlcDEuYW5nbGUgPSBzcC5hbmdsZStkaXZlcmdlbmNlO1xuICAgICAgICAgICAgICAgIGVwMi5hbmdsZSA9IHNwLmFuZ2xlLWRpdmVyZ2VuY2U7XG5cbiAgICAgICAgICAgICAgICBuZXdfc3RhcnRfcG9pbnRzLnB1c2goZXAxKTtcbiAgICAgICAgICAgICAgICBuZXdfc3RhcnRfcG9pbnRzLnB1c2goZXAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vTGV0cyBhZGQgc29tZSBtb3JlIGNvbG9yXG4gICAgICAgICAgICBpZihsZW5ndGggPCAxMCkgY3R4LnN0cm9rZVN0eWxlID0gXCJncmVlblwiO1xuICAgICAgICAgICAgZWxzZSBjdHguc3Ryb2tlU3R5bGUgPSBcImJyb3duXCI7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICBzdGFydF9wb2ludHMgPSBuZXdfc3RhcnRfcG9pbnRzO1xuICAgICAgICAgICAgLy9yZWN1cnNpdmUgY2FsbCAtIG9ubHkgaWYgbGVuZ3RoIGlzIG1vcmUgdGhhbiAyLlxuICAgICAgICAgICAgLy9FbHNlIGl0IHdpbGwgZmFsbCBpbiBhbiBsb25nIGxvb3BcbiAgICAgICAgICAgIGlmKGxlbmd0aCA+IDIpIHNldFRpbWVvdXQoYnJhbmNoZXMsIDUwKTtcbiAgICAgICAgICAgIGVsc2Ugc2V0VGltZW91dChpbml0LCA1MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0X2VuZHBvaW50KHgsIHksIGEsIGxlbmd0aClcbiAgICAgICAge1xuICAgICAgICAgICAgLy9UaGlzIGZ1bmN0aW9uIHdpbGwgY2FsY3VsYXRlIHRoZSBlbmQgcG9pbnRzIGJhc2VkIG9uIHNpbXBsZSB2ZWN0b3JzXG4gICAgICAgICAgICAvL2h0dHA6Ly9waHlzaWNzLmFib3V0LmNvbS9vZC9tYXRoZW1hdGljcy9hL1ZlY3Rvck1hdGguaHRtXG4gICAgICAgICAgICAvL1lvdSBjYW4gcmVhZCBhYm91dCBiYXNpYyB2ZWN0b3JzIGZyb20gdGhpcyBsaW5rXG4gICAgICAgICAgICB2YXIgZXB4ID0geCArIGxlbmd0aCAqIE1hdGguY29zKGEqTWF0aC5QSS8xODApO1xuICAgICAgICAgICAgdmFyIGVweSA9IHkgKyBsZW5ndGggKiBNYXRoLnNpbihhKk1hdGguUEkvMTgwKTtcbiAgICAgICAgICAgIHJldHVybiB7eDogZXB4LCB5OiBlcHl9O1xuICAgICAgICB9XG5cblxuXG5cbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSBFZHdhcmRDaG9yIG9uIDMwLzExLzIwMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdOb2RlWCcpLmNvbnRyb2xsZXIoJ0ZsYXNoQ29udHJvbGxlcicsZnVuY3Rpb24oKXtcblxufSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZENob3Igb24gMzAvMTEvMjAxNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ05vZGVYJykuY29udHJvbGxlcignRnVua1VDb250cm9sbGVyJyxmdW5jdGlvbigpe1xuICAgIHZhciBhdWRpb0N0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8IHdpbmRvdy5XZWJraXRBdWRpb0NvbnRleHQpKCk7XG4gICAgdmFyIHRpbWVEb21haW5BbmFseXNlciA9IGF1ZGlvQ3R4LmNyZWF0ZUFuYWx5c2VyKCk7XG5cbiAgICB2YXIgbXlBdWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbXVzaWNcIik7IC8vRGVmaW5lIHRoZSBhdWRpb1xuICAgIHZhciBzb3VyY2UgPSBhdWRpb0N0eC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UobXlBdWRpbyk7XG4gICAgLy8gdmFyIGZyZXF1ZW5jeURvbWFpbkFuYWx5c2VyID0gYXVkaW9DdHguY3JlYXRlQW5hbHlzZXIoKTtcblxuICAgIHZhciB0aW1lRG9tYWluQ2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdnMxXCIpO1xuICAgIHZhciB0aW1lRG9tYWluQ2FudmFzQ3R4ID0gdGltZURvbWFpbkNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAvLyB2YXIgZnJlcXVlbmN5RG9tYWluQ2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdnMyXCIpO1xuICAgIC8vIHZhciBmcmVxdWVuY3lEb21haW5DYW52YXNDdHggPSBmcmVxdWVuY3lEb21haW5DYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG5cbiAgICBzb3VyY2UuY29ubmVjdCh0aW1lRG9tYWluQW5hbHlzZXIpO1xuICAgIHRpbWVEb21haW5BbmFseXNlci5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcbiAgICAvLyBmcmVxdWVuY3lEb21haW5BbmFseXNlci5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcblxuICAgIC8vIHZhciBmcmVxV2lkdGggPSB0aW1lRG9tYWluQ2FudmFzLndpZHRoO1xuICAgIC8vIHZhciBmcmVxSGVpZ2h0ID0gdGltZURvbWFpbkNhbnZhcy5oZWlnaHQ7XG4gICAgdmFyIHRpbWVXaWR0aCA9IHRpbWVEb21haW5DYW52YXMud2lkdGg7XG4gICAgdmFyIHRpbWVIZWlnaHQgPSB0aW1lRG9tYWluQ2FudmFzLmhlaWdodDtcblxuICAgIHRpbWVEb21haW5BbmFseXNlci5mZnRTaXplID0gMjA0ODtcbiAgICAvLyBmcmVxdWVuY3lEb21haW5BbmFseXNlci5mZnRTaXplID0gMjA0ODtcblxuICAgIHZhciB0aW1lQnVmZmVyTGVuZ3RoID0gdGltZURvbWFpbkFuYWx5c2VyLmZmdFNpemU7XG4gICAgLy8gdmFyIGZyZXFCdWZmZXJMZW5ndGggPSBmcmVxdWVuY3lEb21haW5BbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudDtcblxuICAgIHZhciB0aW1lRGF0YUFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0aW1lQnVmZmVyTGVuZ3RoKTtcbiAgICAvLyB2YXIgZnJlcURhdGFBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoZnJlcUJ1ZmZlckxlbmd0aCk7XG5cbiAgICB0aW1lRG9tYWluQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCB0aW1lV2lkdGgsIHRpbWVIZWlnaHQpO1xuICAgIC8vIGZyZXF1ZW5jeURvbWFpbkNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgdGltZVdpZHRoLCB0aW1lSGVpZ2h0KTtcblxuICAgIGZ1bmN0aW9uIHRpbWVEb21haW5EcmF3KCkge1xuICAgICAgICBkcmF3VmlzdWFsID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpbWVEb21haW5EcmF3KTtcbiAgICAgICAgdGltZURvbWFpbkFuYWx5c2VyLmdldEZsb2F0VGltZURvbWFpbkRhdGEodGltZURhdGFBcnJheSk7XG5cbiAgICAgICAgdGltZURvbWFpbkNhbnZhc0N0eC5maWxsU3R5bGUgPSAncmdiKDI1NSwgMjU1LCAyNTUpJztcbiAgICAgICAgdGltZURvbWFpbkNhbnZhc0N0eC5maWxsUmVjdCgwLCAwLCB0aW1lV2lkdGgsIHRpbWVIZWlnaHQpO1xuICAgICAgICB0aW1lRG9tYWluQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRpbWVEb21haW5DYW52YXNDdHguc3Ryb2tlU3R5bGUgPSAncmdiKDAsIDAsIDApJztcbiAgICAgICAgdGltZURvbWFpbkNhbnZhc0N0eC5iZWdpblBhdGgoKTtcblxuICAgICAgICB2YXIgc2xpY2VXaWR0aCA9IE1hdGguUEkqMi4wIC8gdGltZUJ1ZmZlckxlbmd0aDtcbiAgICAgICAgdmFyIHRoZXRhID0gMDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbWVCdWZmZXJMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSB0aW1lSGVpZ2h0LzMrdGltZURhdGFBcnJheVtpXSAqIDI1MC4wO1xuICAgICAgICAgICAgdGltZURvbWFpbkNhbnZhc0N0eC5zdHJva2VTdHlsZSA9ICdyZ2IoJysyNTUqMC4xLnRvU3RyaW5nKCkrJzAsIDAsIDApJztcbiAgICAgICAgICAgIHRpbWVEb21haW5DYW52YXNDdHguYXJjKHRpbWVXaWR0aC8yLjAsIHRpbWVIZWlnaHQvMi4wLCByLCB0aGV0YSwgdGhldGErc2xpY2VXaWR0aCxmYWxzZSk7XG4gICAgICAgICAgICAvLyBpZiAoaSA9PSB0aW1lQnVmZmVyTGVuZ3RoLTEpIHtcbiAgICAgICAgICAgIC8vICAgICB0aW1lRG9tYWluQ2FudmFzQ3R4LmNsb3NlKCk7XG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgdGhldGEgKz0gc2xpY2VXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICB0aW1lRG9tYWluQ2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgIH1cblxuXG4gICAgLy8gZnVuY3Rpb24gZnJlcXVlbmN5RG9tYWluRHJhdygpIHtcbiAgICAvLyAgICAgZHJhd1Zpc3VhbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmVxdWVuY3lEb21haW5EcmF3KTtcbiAgICAvLyAgICAgZnJlcXVlbmN5RG9tYWluQW5hbHlzZXIuZ2V0RmxvYXRGcmVxdWVuY3lEYXRhKGZyZXFEYXRhQXJyYXkpO1xuICAgIC8vICAgICBmcmVxdWVuY3lEb21haW5DYW52YXNDdHguZmlsbFN0eWxlID0gJ3JnYigyNTUsMjU1LCAyNTUpJztcbiAgICAvLyAgICAgZnJlcXVlbmN5RG9tYWluQ2FudmFzQ3R4LmZpbGxSZWN0KDAsIDAsIHRpbWVXaWR0aCwgdGltZUhlaWdodCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGJhcldpZHRoID0gKHRpbWVXaWR0aCAvIGZyZXFCdWZmZXJMZW5ndGgpICogMi41O1xuICAgIC8vICAgICB2YXIgYmFySGVpZ2h0O1xuICAgIC8vICAgICB2YXIgeCA9IDA7XG4gICAgLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnJlcUJ1ZmZlckxlbmd0aDsgaSsrKSB7XG4gICAgLy8gICAgICAgICBiYXJIZWlnaHQgPSAoZnJlcURhdGFBcnJheVtpXSArIDIwMCkgKiAzO1xuICAgIC8vICAgICAgICAgZnJlcXVlbmN5RG9tYWluQ2FudmFzQ3R4LmZpbGxTdHlsZSA9ICdyZ2IoJyArIE1hdGguZmxvb3IoYmFySGVpZ2h0ICsgMTAwKSArICcsNTAsNTApJztcbiAgICAvLyAgICAgICAgIGZyZXF1ZW5jeURvbWFpbkNhbnZhc0N0eC5maWxsUmVjdCh4LCBmcmVxSGVpZ2h0IC0gYmFySGVpZ2h0IC8gMiwgYmFyV2lkdGgsIGJhckhlaWdodCAvIDIpO1xuICAgIC8vICAgICAgICAgeCArPSBiYXJXaWR0aCArIDE7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICB0aW1lRG9tYWluRHJhdygpO1xuICAgIC8vIGZyZXF1ZW5jeURvbWFpbkRyYXcoKTtcbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSBFZHdhcmRDaG9yIG9uIDMwLzExLzIwMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdOb2RlWCcpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJyxmdW5jdGlvbigkc2NvcGUsICR0cmFuc2l0aW9ucywgJHN0YXRlLCAkbG9jYXRpb24pe1xuICAgJHN0YXRlLmdvKCdmdW5rdScpXG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgRWR3YXJkQ2hvciBvbiAzMC8xMS8yMDE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnTm9kZVgnKS5jb250cm9sbGVyKCdOYXZiYXJDb250cm9sbGVyJyxmdW5jdGlvbigkc3RhdGUsJHN0YXRlUGFyYW1zLCRzY29wZSl7XG4gICAgJHNjb3BlLm1zZz0nISc7XG4gICAgJHNjb3BlLmN1cnJlbnROYXZJdGVtID0gJ3BhZ2UxJztcbiAgICAvLyAkc2NvcGUudG9GdW5rVT1mdW5jdGlvbigpe1xuICAgIC8vICAgICAkc3RhdGUuZ28oJ2Z1bmt1JylcbiAgICAvLyB9O1xuICAgIC8vICRzY29wZS50b1VJPWZ1bmN0aW9uKCl7XG4gICAgLy8gICAgICRzdGF0ZS5nbygndWknKVxuICAgIC8vIH07XG5cbn0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSBFZHdhcmRDaG9yIG9uIDMwLzExLzIwMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdOb2RlWCcpLmNvbnRyb2xsZXIoJ1BhcGVyQ29udHJvbGxlcicsZnVuY3Rpb24oKXtcblxufSk7Il19
